2018-03-01 18:23:11.970000 *
*** main_controller creating HWC ***
2018-03-01 18:23:14.030000 *
*** llrf_handler setting all SCAN to passive***
2018-03-01 18:23:14.033000 *
*** llrf_handler start_trace_monitoring***
2018-03-01 18:23:14.036000 KLYSTRON_FORWARD_PHASE SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-01 18:23:14.039000 started monitoring KLYSTRON_FORWARD_PHASE
2018-03-01 18:23:14.041000 KLYSTRON_REVERSE_PHASE SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-01 18:23:14.044000 started monitoring KLYSTRON_REVERSE_PHASE
2018-03-01 18:23:14.047000 KLYSTRON_FORWARD_POWER SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-01 18:23:14.050000 started monitoring KLYSTRON_FORWARD_POWER
2018-03-01 18:23:14.052000 added KLYSTRON_FORWARD_POWER to power_traces. [should beKLYSTRON_FORWARD_POWER]
2018-03-01 18:23:14.055000 KLYSTRON_REVERSE_POWER SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-01 18:23:14.058000 started monitoring KLYSTRON_REVERSE_POWER
2018-03-01 18:23:14.058000 added KLYSTRON_REVERSE_POWER to power_traces. [should beKLYSTRON_REVERSE_POWER]
2018-03-01 18:23:14.059000 LRRG_CAVITY_REVERSE_PHASE SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-01 18:23:14.059000 started monitoring LRRG_CAVITY_REVERSE_PHASE
2018-03-01 18:23:14.060000 LRRG_CAVITY_FORWARD_PHASE SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-01 18:23:14.061000 started monitoring LRRG_CAVITY_FORWARD_PHASE
2018-03-01 18:23:14.061000 LRRG_CAVITY_FORWARD_POWER SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-01 18:23:14.062000 started monitoring LRRG_CAVITY_FORWARD_POWER
2018-03-01 18:23:14.063000 added LRRG_CAVITY_FORWARD_POWER to power_traces. [should beLRRG_CAVITY_FORWARD_POWER]
2018-03-01 18:23:14.064000 LRRG_CAVITY_REVERSE_POWER SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-01 18:23:14.064000 started monitoring LRRG_CAVITY_REVERSE_POWER
2018-03-01 18:23:14.065000 added LRRG_CAVITY_REVERSE_POWER to power_traces. [should beLRRG_CAVITY_REVERSE_POWER]
2018-03-01 18:23:14.065000 *
*** llrf_handler setup_trace_rolling_average***
2018-03-01 18:23:14.066000 starting rolling average for LRRG_CAVITY_REVERSE_PHASE
2018-03-01 18:23:14.066000 STARTED rolling average for LRRG_CAVITY_REVERSE_PHASE
2018-03-01 18:23:14.067000 Set Infinite End Mask by Power 1, power trace = CAVITY_REVERSE_POWER, phase trace = CAVITY_REVERSE_PHASE, power level 5000.0 SUCCESS
2018-03-01 18:23:14.068000 start_llrf_control created CLARA_LRRG, llrf_handler and got full trace names:
2018-03-01 18:23:14.068000 TRACES TO SAVE: KLYSTRON_FORWARD_PHASE KLYSTRON_REVERSE_PHASE KLYSTRON_FORWARD_POWER KLYSTRON_REVERSE_POWER LRRG_CAVITY_REVERSE_PHASE LRRG_CAVITY_FORWARD_PHASE LRRG_CAVITY_FORWARD_POWER LRRG_CAVITY_REVERSE_POWER
2018-03-01 18:23:14.068000 BREAKDOWN_TRACES:LRRG_CAVITY_REVERSE_PHASE
2018-03-01 18:23:18.084000 start_mod_control created a gun modulator object
2018-03-01 18:23:20.617000 start_vac_valve_control created CLARA_PH1 object
2018-03-01 18:23:26.625000 start_rf_prot_control created a protection control  object
2018-03-01 18:23:26.628000 *
*** controller_base has read config***
2018-03-01 18:23:26.631000 config file = test_LLRG.config
dumping data to log
VAC_SPIKE_DECAY_TIME:2000, VAC_CHECK_TIME:200, VAC_SHOULD_DROP_AMP:True, OUTSIDE_MASK_COOLDOWN_TIME:3000, VAC_PV:CLA-LRG1-VAC-IMG-01:P, VAC_MAX_AMP_DROP:7.0, VAC_SPIKE_DECAY_LEVEL:1.2, VAC_DECAY_MODE:LEVEL, VAC_MAX_LEVEL:5e-09, VAC_SPIKE_AMP_DROP:5.0, VAC_SPIKE_DELTA:4e-09, VAC_NUM_SAMPLES_TO_AVERAGE:7, 
DC_SPIKE_DECAY_LEVEL:1.2, DC_PV:EBT-INJ-SCOPE-01:P1, DC_NUM_SAMPLES_TO_AVERAGE:5, DC_SPIKE_AMP_DROP:6.0, OUTSIDE_MASK_COOLDOWN_TIME:3000, DC_SHOULD_DROP_AMP:False, DC_CHECK_TIME:1000, DC_SPIKE_DELTA:0.015, DC_SPIKE_DECAY_TIME:2000, DC_DECAY_MODE:TIMED, 
PULSE_COUNT_BREAKDOWN_LOG_FILENAME:pulse_breakdown_log.txt, OUTSIDE_MASK_FORWARD_FILENAME:outside_forward_log, OUTSIDE_MASK_REVERSE_FILENAME:outside_reverse_log, OUTSIDE_MASK_PROBE_FILENAME:outside_probe_log, LOG_DIRECTORY:C:\Users\dlerlp\Documents\RF_condition_2018\logs_clara_lrrg\, AMP_PWR_LOG_TIME:50, DATA_LOG_TIME:1000, LOG_FILENAME:log.txt, DATA_LOG_FILENAME:data_log, 
VAC_VALVE:S01-VALV-01, VAC_VALVE_AREA:CLARA_PH1, VAC_VALVE_CHECK_TIME:1000, 
WATER_TEMPERATURE_CHECK_TIME:1000, WATER_TEMPERATURE_PV:CLA-GUN-RF-LRRG-01:RT, 
CAVITY_TEMPERATURE_CHECK_TIME:1000, CAVITY_TEMPERATURE_PV:CLA-GUN-RF-LRRG-01:RT, 
5_MEAN_START:2.8, 1_MEAN_START:2.3, DEFAULT_RF_INCREASE_LEVEL:10, BREAKDOWN_RATE_AIM:100, TRACES_TO_SAVE:['KLYSTRON_FORWARD_PHASE', 'KLYSTRON_REVERSE_PHASE', 'KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'LRRG_CAVITY_REVERSE_PHASE', 'LRRG_CAVITY_FORWARD_PHASE', 'LRRG_CAVITY_FORWARD_POWER', 'LRRG_CAVITY_REVERSE_POWER'], NORMAL_POWER_INCREASE:10000, NUMBER_OF_PULSES_IN_BREAKDOWN_HISTORY:1000000, POWER_AIM:0.1, MEAN_TRACES:['KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'LRRG_CAVITY_FORWARD_POWER', 'LRRG_CAVITY_REVERSE_POWER', 'LRRG_CAVITY_REVERSE_PHASE'], 4_MEAN_END:3.1, LOW_POWER_INCREASE_RATE_LIMIT:1000000, DEFAULT_PULSE_COUNT:150, RF_INCREASE_LEVEL:0.001, LLRF_CHECK_TIME:50, RF_REPETITION_RATE:10, 4_MEAN_START:2.9, 5_MEAN_END:3.0, 3_MEAN_END:3.0, 2_MEAN_START:2.3, PULSE_LENGTH_AIM:2500.0, RF_INCREASE_RATE:0.33333, 2_MEAN_END:2.8, EXTRA_TRACES_ON_BREAKDOWN:2, RF_STRUCTURE:CLARA_LRRG, NUM_BUFFER_TRACES:40, 3_MEAN_START:2.5, PULSE_LENGTH_START:100.0, PULSE_LENGTH_STEP:250.0, 1_MEAN_END:2.8, LOW_POWER_INCREASE:1000, TIME_BETWEEN_RF_INCREASES:10, KLY_PWR_FOR_ACTIVE_PULSE:500.0, 
CRP_MASK_FLOOR:0, CRP_AMP_DROP_VAL:2, CRP_S2:3.1, CFP_CHECK_STREAK:10, CFP_AMP_DROP_VAL:3, PHASE_MASK_BY_POWER_POWER_TRACE_1:CAVITY_REVERSE_POWER, CFP_MASK_END:2.0, BREAKDOWN_TRACES:['LRRG_CAVITY_REVERSE_PHASE'], CFP_MASK_LEVEL:35, CFP_MASK_FLOOR:5000, PHASE_MASK_BY_POWER_LEVEL_1:5000.0, CFP_AUTO_SET:False, CRP_MASK_END:4.8, CRP_NUM_AVERAGE_TRACES:2, CRP_S3:3.3, CRP_MASK_SET_TYPE:TIME, CRP_S1:0.8, CRP_AMP_DROP:True, OUTSIDE_MASK_COOLDOWN_TIME:3000, CRP_S4:5.0, PHASE_MASK_BY_POWER_PHASE_TRACE_1:CAVITY_REVERSE_PHASE, CFP_AMP_DROP:False, OUTSIDE_MASK_CHECK_TIME:100, CRP_MASK_LEVEL:35, CRP_CHECK_STREAK:2, CFP_S4:301, CFP_S3:301, CFP_S2:301, CFP_S1:63, CRP_AUTO_SET:False, CFP_MASK_TYPE:PERCENT, CFP_NUM_AVERAGE_TRACES:1, CFP_MASK_SET_TYPE:INDEX, CRP_MASK_TYPE:ABSOLUTE, 
MOD_CHECK_TIME:1000, 
RF_PROT_CHECK_TIME:1000, RF_STRUCTURE:CLARA_LRRG, 
GUI_UPDATE_TIME:1000, 
SOL_PV:CLA-GUN-MAG-SOL-02:READI, SOL_CHECK_TIME:1000, 
2018-03-01 18:23:26.700000 *
*** rf_condition_data pulse_count_breakdown_log ***
2018-03-01 18:23:26.700000 log_pulse_count 1832749
required_pulses 150
breakdown_count 66
log_amp_set 16170
current_ramp_index 237
pulse length = 2.503
next_sp_decrease 16168
2018-03-01 18:23:26.701000 *
*** Last million pulses***
2018-03-01 18:23:26.702000 Million pulses agao  = 832749
2018-03-01 18:23:26.702000 Monitoring RF-PROTECTION
2018-03-01 18:23:28.329000 Monitoring VAC-VALVE
2018-03-01 18:23:28.332000 Monitoring MODULATOR
2018-03-01 18:23:29.379000 data_monitoring Connected to PV = CLA-GUN-RF-LRRG-01:RT with ID = d0 acquiring data
2018-03-01 18:23:29.382000 Monitoring CAVITY TEMPERATURE
2018-03-01 18:23:30.428000 data_monitoring Connected to PV = CLA-GUN-RF-LRRG-01:RT with ID = d1 acquiring data
2018-03-01 18:23:30.428000 Monitoring WATER TEMP
2018-03-01 18:23:31.479000 data_monitoring Connected to PV = CLA-GUN-MAG-SOL-02:READI with ID = d2 acquiring data
2018-03-01 18:23:31.480000 Monitoring SOLENOID READI
2018-03-01 18:23:32.553000 data_monitoring Connected to PV = CLA-LRG1-VAC-IMG-01:P with ID = d3 acquiring data
2018-03-01 18:23:32.556000 vac_spike_monitor will drop amp on spike detection
2018-03-01 18:23:32.559000 vac_spike_monitor STARTED running
2018-03-01 18:23:32.562000 Monitoring VACUUM
2018-03-01 18:23:33.606000 data_monitoring Connected to PV = EBT-INJ-SCOPE-01:P1 with ID = d4 acquiring data
2018-03-01 18:23:33.606000 dc_spike_monitor will NOT drop amp on spike detection
2018-03-01 18:23:33.607000 dc_spike_monitor STARTED running
2018-03-01 18:23:33.608000 Monitoring DC
2018-03-01 18:23:33.608000 llrf_simple_param_monitor adding KLYSTRON_FORWARD_POWER to mean trace list
2018-03-01 18:23:33.609000 llrf_simple_param_monitor adding KLYSTRON_REVERSE_POWER to mean trace list
2018-03-01 18:23:33.609000 llrf_simple_param_monitor adding LRRG_CAVITY_FORWARD_POWER to mean trace list
2018-03-01 18:23:33.610000 llrf_simple_param_monitor adding LRRG_CAVITY_REVERSE_POWER to mean trace list
2018-03-01 18:23:33.611000 llrf_simple_param_monitor adding LRRG_CAVITY_REVERSE_PHASE to mean trace list
2018-03-01 18:23:33.612000 Monitoring llrf
2018-03-01 18:23:33.613000 Monitoring outside_masks
2018-03-01 18:23:33.654000 gui_conditioning has disabled ramping RF
2018-03-01 18:23:33.891000 *
*** llrf_handler set_mean_pwr_position***
2018-03-01 18:23:33.892000 rf pulse end time = 2.95347675314, index = 318
pulse_latency     = 50
.getPulseLength() = 2.50325163834
2018-03-01 18:23:33.893000 KLYSTRON_FORWARD_POWER found in config file
2018-03-01 18:23:33.895000 KLYSTRON_FORWARD_POWER mean monitoring started
2018-03-01 18:23:33.898000 trace_mean_start/end (us) = 2.3/2.8
meantime = 0.5
2018-03-01 18:23:33.898000 KLYSTRON_REVERSE_POWER found in config file
2018-03-01 18:23:33.899000 KLYSTRON_REVERSE_POWER mean monitoring started
2018-03-01 18:23:33.900000 trace_mean_start/end (us) = 2.3/2.8
meantime = 0.5
2018-03-01 18:23:33.901000 LRRG_CAVITY_FORWARD_POWER found in config file
2018-03-01 18:23:33.903000 LRRG_CAVITY_FORWARD_POWER mean monitoring started
2018-03-01 18:23:33.906000 trace_mean_start/end (us) = 2.5/3.0
meantime = 0.5
2018-03-01 18:23:33.909000 LRRG_CAVITY_REVERSE_POWER found in config file
2018-03-01 18:23:33.911000 LRRG_CAVITY_REVERSE_POWER mean monitoring started
2018-03-01 18:23:33.911000 trace_mean_start/end (us) = 2.9/3.1
meantime = 0.2
2018-03-01 18:23:33.911000 LRRG_CAVITY_REVERSE_PHASE found in config file
2018-03-01 18:23:33.912000 LRRG_CAVITY_REVERSE_PHASE mean monitoring started
2018-03-01 18:23:33.912000 trace_mean_start/end (us) = 2.8/3.0
meantime = 0.2
2018-03-01 18:23:33.912000 LRRG_CAVITY_REVERSE_PHASE, streak = 2, floor = 0, drop = True, drop_val= 2, update func = <bound method llrf_handler.time_absolute_mask of <controllers.llrf_handler.llrf_handler object at 0x02E26990>>
2018-03-01 18:23:33.913000 setNumContinuousOutsideMaskCount = True
2018-03-01 18:23:33.917000 setMaskFloor = True
2018-03-01 18:23:33.919000 LRRG_CAVITY_REVERSE_PHASE, setShouldCheckMask = True
2018-03-01 18:23:33.919000 LRRG_CAVITY_REVERSE_PHASE, setDropAmpOnOutsideMaskDetection = True
2018-03-01 18:23:33.929000 *
*** main_controller The RF Conditioning is Preparing to Entering Main_Loop !***
2018-03-01 18:23:34.934000 set_amp = 16170, took 0.00471418148719 time,  averages NOT reset, mask_set = False
2018-03-01 18:23:34.936000 Adding to pulse_breakdown_log =  1832949 66 16170 237 2503
2018-03-01 18:23:35.941000 set_global_check_mask setGlobalCheckMask True
2018-03-01 18:23:35.943000 llrf_handler cant set mask, NO AVERAGE Traces
2018-03-01 18:23:36.065000 LRRG_CAVITY_REVERSE_PHASE, set time_absolute_mask
2018-03-01 18:23:36.066000 llrf_handler has set mask 
