2018-12-18 16:03:43.161000 *
*** main_controller creating HWC ***
2018-12-18 16:03:45.327000 *
*** llrf_handler setting all SCAN to passive***
2018-12-18 16:03:45.330000 *
*** llrf_handler start_trace_monitoring()***
2018-12-18 16:03:45.403000 *
*** llrf_handler setup_trace_rolling_average***
2018-12-18 16:03:45.404000 starting rolling average for HRRG_CAVITY_REVERSE_PHASE (CRPHA)
2018-12-18 16:03:45.405000 STARTED rolling average for HRRG_CAVITY_REVERSE_PHASE
2018-12-18 16:03:45.406000 RollingAverageSize = 5
2018-12-18 16:03:45.407000 RollingAverageCount = 0
2018-12-18 16:03:45.409000 starting rolling average for HRRG_CAVITY_FORWARD_PHASE (CFPHA)
2018-12-18 16:03:45.410000 STARTED rolling average for HRRG_CAVITY_FORWARD_PHASE
2018-12-18 16:03:45.412000 RollingAverageSize = 5
2018-12-18 16:03:45.414000 RollingAverageCount = 0
2018-12-18 16:03:45.415000 starting rolling average for HRRG_CAVITY_PROBE_PHASE (CPPHA)
2018-12-18 16:03:45.416000 STARTED rolling average for HRRG_CAVITY_PROBE_PHASE
2018-12-18 16:03:45.417000 RollingAverageSize = 5
2018-12-18 16:03:45.418000 RollingAverageCount = 0
2018-12-18 16:03:45.418000 Set Infinite End Mask by Power 1, power trace = CAVITY_REVERSE_POWER, phase trace = CAVITY_REVERSE_PHASE, power level 5000.0 FAIL
2018-12-18 16:03:45.420000 start_llrf_control created VELA_HRRG, llrf_handler and got full trace names:
2018-12-18 16:03:45.421000 TRACES TO SAVE: KLYSTRON_FORWARD_PHASE KLYSTRON_REVERSE_PHASE KLYSTRON_FORWARD_POWER KLYSTRON_REVERSE_POWER HRRG_CAVITY_REVERSE_PHASE HRRG_CAVITY_FORWARD_PHASE HRRG_CAVITY_FORWARD_POWER HRRG_CAVITY_REVERSE_POWER HRRG_CAVITY_PROBE_POWER HRRG_CAVITY_PROBE_POWER
2018-12-18 16:03:45.422000 BREAKDOWN_TRACES:HRRG_CAVITY_REVERSE_PHASE HRRG_CAVITY_FORWARD_PHASE HRRG_CAVITY_PROBE_PHASE
2018-12-18 16:03:47.427000 start_mod_control created a gun modulator object
2018-12-18 16:03:49.941000 start_vac_valve_control created ALL_VELA_CLARA object
2018-12-18 16:03:51.968000 start_rf_prot_control created a protection control  object
2018-12-18 16:03:51.970000 *
*** controller_base has read config***
2018-12-18 16:03:51.977000 config file = test.config
dumping data to log
VAC_SPIKE_DECAY_TIME:2000, VAC_CHECK_TIME:200, VAC_SHOULD_DROP_AMP:True, OUTSIDE_MASK_COOLDOWN_TIME:3000, VAC_PV:EBT-HRG1-VAC-IMG-01:PRES, VAC_MAX_AMP_DROP:7.0, VAC_SPIKE_DECAY_LEVEL:1.2, VAC_DECAY_MODE:LEVEL, VAC_MAX_LEVEL:5e-09, VAC_SPIKE_AMP_DROP:5.0, VAC_SPIKE_DELTA:4e-09, VAC_NUM_SAMPLES_TO_AVERAGE:7, 
DC_SPIKE_DECAY_LEVEL:1.2, DC_PV:EBT-INJ-DIA-WCM-01:DI-MAX, DC_NUM_SAMPLES_TO_AVERAGE:5, DC_SPIKE_AMP_DROP:8.0, OUTSIDE_MASK_COOLDOWN_TIME:3000, DC_SHOULD_DROP_AMP:True, DC_CHECK_TIME:1000, DC_SPIKE_DELTA:0.5, DC_SPIKE_DECAY_TIME:2000, DC_DECAY_MODE:TIMED, 
PULSE_COUNT_BREAKDOWN_LOG_FILENAME:pulse_breakdown_log.txt, OUTSIDE_MASK_FORWARD_FILENAME:outside_forward_log, OUTSIDE_MASK_REVERSE_FILENAME:outside_reverse_log, OUTSIDE_MASK_PROBE_FILENAME:outside_probe_log, LOG_DIRECTORY:D:\VELA\GIT Projects\Software\Apps\RF_Conditioner\logs\HRRG\, AMP_PWR_LOG_TIME:2000, DATA_LOG_TIME:1000, LOG_FILENAME:log.txt, AMP_POWER_LOG_FILENAME:amp_power_log.txt, DATA_LOG_FILENAME:data_log, 
VAC_VALVE:INJ-VALV1, VAC_VALVE_AREA:ALL_VELA_CLARA, VAC_VALVE_CHECK_TIME:1000, 
WATER_TEMPERATURE_CHECK_TIME:1000, WATER_TEMPERATURE_PV:CLA-GUN-H20-GUN-03:RT, 
CAVITY_TEMPERATURE_CHECK_TIME:1000, CAVITY_TEMPERATURE_PV:CLA-GUN-H20-GUN-01:RT, 
5_MEAN_START:1.0, 6_MEAN_END:1.6, 1_MEAN_START:1.0, DEFAULT_RF_INCREASE_LEVEL:10, BREAKDOWN_RATE_AIM:100, TRACES_TO_SAVE:['KLYSTRON_FORWARD_PHASE', 'KLYSTRON_REVERSE_PHASE', 'KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'HRRG_CAVITY_REVERSE_PHASE', 'HRRG_CAVITY_FORWARD_PHASE', 'HRRG_CAVITY_FORWARD_POWER', 'HRRG_CAVITY_REVERSE_POWER', 'HRRG_CAVITY_PROBE_POWER', 'HRRG_CAVITY_PROBE_POWER'], NORMAL_POWER_INCREASE:10000, NUMBER_OF_PULSES_IN_BREAKDOWN_HISTORY:1000000, POWER_AIM:0.1, MEAN_TRACES:['KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'HRRG_CAVITY_FORWARD_POWER', 'HRRG_CAVITY_REVERSE_POWER', 'HRRG_CAVITY_REVERSE_PHASE', 'HRRG_CAVITY_PROBE_POWER'], 4_MEAN_END:1.6, LOW_POWER_INCREASE_RATE_LIMIT:1000000, DEFAULT_PULSE_COUNT:500, RF_INCREASE_LEVEL:0.001, 6_MEAN_START:1.5, LLRF_CHECK_TIME:50, RF_REPETITION_RATE:10, 4_MEAN_START:1.5, 5_MEAN_END:1.4, 3_MEAN_END:1.4, 2_MEAN_START:1.0, PULSE_LENGTH_AIM:2500.0, RF_INCREASE_RATE:0.33333, 2_MEAN_END:1.4, EXTRA_TRACES_ON_BREAKDOWN:2, RF_STRUCTURE:VELA_HRRG, NUM_BUFFER_TRACES:500, 3_MEAN_START:1.0, PULSE_LENGTH_START:100.0, PULSE_LENGTH_STEP:250.0, 1_MEAN_END:1.4, LOW_POWER_INCREASE:1000, TIME_BETWEEN_RF_INCREASES:10, KLY_PWR_FOR_ACTIVE_PULSE:500.0, 
CFPHA_MASK_TYPE:PERCENT, CRPHA_CHECK_STREAK:10, CRPHA_MASK_START:0.75, CPPOW_MASK_TYPE:PERCENT, CFPOW_MASK_LEVEL:40, CPPOW_AUTO_SET:False, CRPHA_MASK_TYPE:ABSOLUTE, BREAKDOWN_TRACES:['HRRG_CAVITY_REVERSE_PHASE', 'HRRG_CAVITY_FORWARD_PHASE', 'HRRG_CAVITY_PROBE_PHASE'], CRPHA_MASK_ABS_MIN:0, CFPOW_AMP_DROP_VALUE:6, CPPHA_MASK_FLOOR:0, CPPHA_MASK_SET_TYPE:INDEX, CFPOW_MASK_WINDOW_START:301, CFPOW_MASK_WINDOW_END:302, OUTSIDE_MASK_COOLDOWN_TIME:3000, CFPHA_MASK_SET_TYPE:INDEX, CPPOW_MASK_START:85, CFPOW_MASK_TYPE:PERCENT, CFPHA_MASK_WINDOW_START:401, CRPOW_MASK_WINDOW_START:500, CPPHA_NUM_AVERAGE_TRACES:5, CRPHA_NUM_AVERAGE_TRACES:5, CRPOW_MASK_START:57, CRPHA_MASK_LEVEL:20, CRPOW_CHECK_STREAK:10, CRPOW_NUM_AVERAGE_TRACES:5, CPPHA_MASK_START:85, CFPOW_MASK_FLOOR:50, CRPHA_MASK_SET_TYPE:TIME, CFPOW_DROP_AMP:True, CFPOW_NUM_AVERAGE_TRACES:5, CPPHA_MASK_END:265, CRPHA_MASK_FLOOR:0, CPPOW_MASK_SET_TYPE:INDEX, CFPHA_CHECK_STREAK:10, CRPHA_MASK_WINDOW_START:1.5, CFPOW_MASK_SET_TYPE:INDEX, CPPOW_MASK_FLOOR:50, CRPOW_DROP_AMP:True, CFPHA_DROP_AMP:True, CPPOW_DROP_AMP:True, CPPHA_AUTO_SET:False, CPPHA_MASK_WINDOW_START:500, CPPOW_CHECK_STREAK:10, CRPOW_MASK_LEVEL:30, CPPHA_MASK_WINDOW_END:501, CFPHA_MASK_START:74, CPPOW_MASK_WINDOW_START:401, CFPOW_MASK_START:57, CFPOW_MASK_END:179, CFPHA_NUM_AVERAGE_TRACES:5, CFPHA_AMP_DROP_VALUE:5, CPPOW_MASK_ABS_MIN:0, CRPOW_MASK_WINDOW_END:501, CFPOW_MASK_ABS_MIN:50, PHASE_MASK_BY_POWER_POWER_TRACE_1:CAVITY_REVERSE_POWER, CPPOW_AMP_DROP_VALUE:4, CRPOW_MASK_TYPE:PERCENT, CRPOW_AUTO_SET:False, CPPOW_MASK_LEVEL:40, CPPOW_MASK_END:324, PHASE_MASK_BY_POWER_LEVEL_1:5000.0, CRPHA_AUTO_SET:False, PHASE_MASK_BY_POWER_PHASE_TRACE_1:CAVITY_REVERSE_PHASE, OUTSIDE_MASK_CHECK_TIME:100, CPPHA_AMP_DROP_VALUE:3, CRPHA_DROP_AMP:True, CRPOW_MASK_ABS_MIN:0, CFPHA_AUTO_SET:False, CRPHA_MASK_END:2.0, CFPOW_CHECK_STREAK:10, CFPHA_MASK_FLOOR:0, CRPOW_AMP_DROP_VALUE:2, CFPHA_MASK_LEVEL:30, CRPHA_MASK_WINDOW_END:1.67, CPPHA_CHECK_STREAK:10, CRPHA_AMP_DROP_VALUE:1, CPPHA_MASK_TYPE:ABSOLUTE, CFPHA_MASK_WINDOW_END:402, CPPOW_NUM_AVERAGE_TRACES:5, CFPOW_AUTO_SET:False, CFPHA_MASK_ABS_MIN:0, CPPHA_MASK_LEVEL:30, CPPHA_DROP_AMP:True, CRPOW_MASK_SET_TYPE:INDEX, CRPOW_MASK_FLOOR:100, CRPOW_MASK_END:324, CPPHA_MASK_ABS_MIN:0, CPPOW_MASK_WINDOW_END:402, CFPHA_MASK_END:163, 
MOD_CHECK_TIME:1000, 
RF_PROT_CHECK_TIME:1000, RF_STRUCTURE:VELA_HRRG, 
GUI_UPDATE_TIME:1000, 
SOL_PV:CLA-GUN-MAG-SOL-02:READI, SOL_CHECK_TIME:1000, 
2018-12-18 16:03:51.992000 *
*** rf_condition_data pulse_count_breakdown_log ***
2018-12-18 16:03:51.994000 log_pulse_count 101
required_pulses 500
breakdown_count -30
log_amp_set 198
current_ramp_index 1
pulse length = 3.5
next_sp_decrease 197
2018-12-18 16:03:51.996000 *
*** Last million pulses***
2018-12-18 16:03:51.997000 Million pulses agao  = -999899
2018-12-18 16:03:51.999000 Monitoring RF-PROTECTION
2018-12-18 16:03:52 Monitoring VAC-VALVE
2018-12-18 16:03:52.001000 Monitoring MODULATOR
2018-12-18 16:03:53.035000 data_monitoring Connected to PV = CLA-GUN-H20-GUN-01:RT with ID = d0 acquiring data
2018-12-18 16:03:53.036000 Monitoring CAVITY TEMPERATURE
2018-12-18 16:03:54.083000 data_monitoring Connected to PV = CLA-GUN-H20-GUN-03:RT with ID = d1 acquiring data
2018-12-18 16:03:54.085000 Monitoring WATER TEMP
2018-12-18 16:03:55.134000 data_monitoring Connected to PV = CLA-GUN-MAG-SOL-02:READI with ID = d2 acquiring data
2018-12-18 16:03:55.136000 Monitoring SOLENOID READI
2018-12-18 16:03:56.183000 data_monitoring Connected to PV = EBT-HRG1-VAC-IMG-01:PRES with ID = d3 acquiring data
2018-12-18 16:03:56.185000 vac_spike_monitor will drop amp on spike detection
2018-12-18 16:03:56.187000 vac_spike_monitor STARTED running
2018-12-18 16:03:56.189000 vac_spike_monitor vac_spike_status UNKNOWN
2018-12-18 16:03:56.191000 vac_spike_monitor vac_spike_status GOOD
2018-12-18 16:03:56.192000 Monitoring VACUUM
2018-12-18 16:03:57.223000 data_monitoring Connected to PV = EBT-INJ-DIA-WCM-01:DI-MAX with ID = d4 acquiring data
2018-12-18 16:03:57.224000 dc_spike_monitor will drop amp on spike detection
2018-12-18 16:03:57.225000 dc_spike_monitor STARTED running
2018-12-18 16:03:57.225000 dc_spike_monitor DC_spike_status UNKNOWN
2018-12-18 16:03:57.226000 dc_spike_monitor DC_spike_status GOOD
2018-12-18 16:03:57.227000 Monitoring DC
2018-12-18 16:03:57.229000 llrf_simple_param_monitor adding KLYSTRON_FORWARD_POWER to mean trace list
2018-12-18 16:03:57.230000 llrf_simple_param_monitor adding KLYSTRON_REVERSE_POWER to mean trace list
2018-12-18 16:03:57.232000 llrf_simple_param_monitor adding HRRG_CAVITY_FORWARD_POWER to mean trace list
2018-12-18 16:03:57.233000 llrf_simple_param_monitor adding HRRG_CAVITY_REVERSE_POWER to mean trace list
2018-12-18 16:03:57.234000 llrf_simple_param_monitor adding HRRG_CAVITY_REVERSE_PHASE to mean trace list
2018-12-18 16:03:57.235000 llrf_simple_param_monitor adding HRRG_CAVITY_PROBE_POWER to mean trace list
2018-12-18 16:03:57.235000 Monitoring llrf
2018-12-18 16:03:57.236000 Monitoring outside_masks
2018-12-18 16:03:57.280000 gui_conditioning has disabled ramping RF
2018-12-18 16:03:57.333000 *
*** main_controller Loading amp_set vs Kly_fwd_pow dictionary***
2018-12-18 16:03:57.535000 *
*** llrf_handler set_mean_pwr_position***
2018-12-18 16:03:57.536000 rf pulse end time = 3.95297650802, index = 429
pulse_latency     = 50
.getPulseLength() = 3.50275139321
2018-12-18 16:03:57.537000 KLYSTRON_FORWARD_POWER found in config file
2018-12-18 16:03:57.539000 KLYSTRON_FORWARD_POWER mean monitoring started
2018-12-18 16:03:57.540000 trace_mean_start/end (us) = 1.0/1.4
meantime = 0.4
2018-12-18 16:03:57.542000 KLYSTRON_REVERSE_POWER found in config file
2018-12-18 16:03:57.543000 KLYSTRON_REVERSE_POWER mean monitoring started
2018-12-18 16:03:57.543000 trace_mean_start/end (us) = 1.0/1.4
meantime = 0.4
2018-12-18 16:03:57.544000 HRRG_CAVITY_FORWARD_POWER found in config file
2018-12-18 16:03:57.545000 HRRG_CAVITY_FORWARD_POWER mean monitoring started
2018-12-18 16:03:57.546000 trace_mean_start/end (us) = 1.0/1.4
meantime = 0.4
2018-12-18 16:03:57.547000 HRRG_CAVITY_REVERSE_POWER found in config file
2018-12-18 16:03:57.549000 HRRG_CAVITY_REVERSE_POWER mean monitoring started
2018-12-18 16:03:57.549000 trace_mean_start/end (us) = 1.5/1.6
meantime = 0.1
2018-12-18 16:03:57.550000 HRRG_CAVITY_REVERSE_PHASE found in config file
2018-12-18 16:03:57.551000 HRRG_CAVITY_REVERSE_PHASE mean monitoring started
2018-12-18 16:03:57.552000 trace_mean_start/end (us) = 1.0/1.4
meantime = 0.4
2018-12-18 16:03:57.552000 HRRG_CAVITY_PROBE_POWER found in config file
2018-12-18 16:03:57.553000 HRRG_CAVITY_PROBE_POWER mean monitoring started
2018-12-18 16:03:57.554000 trace_mean_start/end (us) = 1.5/1.6
meantime = 0.1
2018-12-18 16:03:57.554000 set_mask_dict CRPHA
2018-12-18 16:03:57.555000 HRRG_CAVITY_REVERSE_PHASE, streak = 10, drop = True, drop_val= 1, update func = <bound method llrf_handler.update_mask of <src.controllers.llrf_handler.llrf_handler object at 0x0CF65570>>
2018-12-18 16:03:57.556000 setNumContinuousOutsideMaskCount = True
2018-12-18 16:03:57.557000 HRRG_CAVITY_REVERSE_PHASE, setShouldCheckMask = True
2018-12-18 16:03:57.558000 HRRG_CAVITY_REVERSE_PHASE, setDropAmpOnOutsideMaskEvent = True
2018-12-18 16:03:57.559000 HRRG_CAVITY_REVERSE_PHASE, set time_mask
2018-12-18 16:03:57.560000 set_mask_dict CFPHA
2018-12-18 16:03:57.562000 HRRG_CAVITY_FORWARD_PHASE, streak = 10, drop = True, drop_val= 5, update func = <bound method llrf_handler.update_mask of <src.controllers.llrf_handler.llrf_handler object at 0x0CF65570>>
2018-12-18 16:03:57.563000 setNumContinuousOutsideMaskCount = True
2018-12-18 16:03:57.565000 HRRG_CAVITY_FORWARD_PHASE, setShouldCheckMask = True
2018-12-18 16:03:57.566000 HRRG_CAVITY_FORWARD_PHASE, setDropAmpOnOutsideMaskEvent = True
2018-12-18 16:03:57.567000 HRRG_CAVITY_FORWARD_PHASE, set index_mask
2018-12-18 16:03:57.569000 set_mask_dict CPPHA
2018-12-18 16:03:57.570000 HRRG_CAVITY_PROBE_PHASE, streak = 10, drop = True, drop_val= 3, update func = <bound method llrf_handler.update_mask of <src.controllers.llrf_handler.llrf_handler object at 0x0CF65570>>
2018-12-18 16:03:57.572000 setNumContinuousOutsideMaskCount = True
2018-12-18 16:03:57.573000 HRRG_CAVITY_PROBE_PHASE, setShouldCheckMask = True
2018-12-18 16:03:57.574000 HRRG_CAVITY_PROBE_PHASE, setDropAmpOnOutsideMaskEvent = True
2018-12-18 16:03:57.576000 HRRG_CAVITY_PROBE_PHASE, set index_mask
2018-12-18 16:03:57.580000 *
*** main_controller The RF Conditioning is Preparing to Entering Main_Loop !***
2018-12-18 16:03:58.631000 set_amp = 198, took 0.0494197085889 time,  averages NOT reset, mask_set = False
2018-12-18 16:03:58.633000 Adding to pulse_breakdown_log: 126 -30 198 1 3502
2018-12-18 16:03:59.637000 Found RF power, kly_fwd_power_max = 2914.60424057
2018-12-18 16:03:59.639000 *
*** MASK SETTINGS***
2018-12-18 16:03:59.640000 HRRG_CAVITY_REVERSE_PHASE
2018-12-18 16:03:59.642000 isCheckingMask = False
2018-12-18 16:03:59.644000 Start = 0.756378192878(74)
2018-12-18 16:03:59.645000 End   = 2.00800401205(213)
2018-12-18 16:03:59.647000 Window Start = 1.50375188346(157)
2018-12-18 16:03:59.648000 Window End   = 1.67483742709(176)
2018-12-18 16:03:59.650000 Value = 20.0
2018-12-18 16:03:59.651000 Floor = 0.0
2018-12-18 16:03:59.653000 IsPercent  = False
2018-12-18 16:03:59.654000 IsAbsolute = True
2018-12-18 16:03:59.655000 HRRG_CAVITY_FORWARD_PHASE
2018-12-18 16:03:59.657000 isCheckingMask = True
2018-12-18 16:03:59.658000 Start = 0.756378192878(74)
2018-12-18 16:03:59.659000 End   = 1.55777889724(163)
2018-12-18 16:03:59.660000 Window Start = 3.70085044373(401)
2018-12-18 16:03:59.661000 Window End   = 3.70985494602(402)
2018-12-18 16:03:59.662000 Value = 30.0
2018-12-18 16:03:59.663000 Floor = 0.0
2018-12-18 16:03:59.663000 IsPercent  = True
2018-12-18 16:03:59.664000 IsAbsolute = False
2018-12-18 16:03:59.665000 HRRG_CAVITY_PROBE_PHASE
2018-12-18 16:03:59.666000 isCheckingMask = False
2018-12-18 16:03:59.667000 Start = 0.855427718136(85)
2018-12-18 16:03:59.669000 End   = 2.47623813145(265)
2018-12-18 16:03:59.670000 Window Start = 4.59229617105(500)
2018-12-18 16:03:59.670000 Window End   = 4.60130067334(501)
2018-12-18 16:03:59.671000 Value = 30.0
2018-12-18 16:03:59.672000 Floor = 0.0
2018-12-18 16:03:59.673000 IsPercent  = False
2018-12-18 16:03:59.673000 IsAbsolute = True
2018-12-18 16:03:59.674000 isGlobalCheckMask = False
2018-12-18 16:03:59.675000 *
*** ROLLING AVERAGE SETTINGS***
2018-12-18 16:03:59.676000 HRRG_CAVITY_REVERSE_PHASE
2018-12-18 16:03:59.677000 isKeepingRollingAverage = True
2018-12-18 16:03:59.677000 hasRollingAverage = True
2018-12-18 16:03:59.678000 RollingAverageSize = 5
2018-12-18 16:03:59.680000 RollingAverageCount = 5
2018-12-18 16:03:59.681000 HRRG_CAVITY_FORWARD_PHASE
2018-12-18 16:03:59.682000 isKeepingRollingAverage = True
2018-12-18 16:03:59.683000 hasRollingAverage = True
2018-12-18 16:03:59.684000 RollingAverageSize = 5
2018-12-18 16:03:59.685000 RollingAverageCount = 5
2018-12-18 16:03:59.686000 HRRG_CAVITY_PROBE_PHASE
2018-12-18 16:03:59.687000 isKeepingRollingAverage = True
2018-12-18 16:03:59.688000 hasRollingAverage = True
2018-12-18 16:03:59.689000 RollingAverageSize = 5
2018-12-18 16:03:59.690000 RollingAverageCount = 5
2018-12-18 16:04:01.190000 set_global_check_mask setGlobalCheckMask True
2018-12-18 16:04:05.567000 gui_conditioning has enabled ramping RF
2018-12-18 16:04:17.486000 gui_conditioning has disabled ramping RF
2018-12-18 16:04:18.535000 gui_conditioning has enabled ramping RF
2018-12-18 16:04:25.815000 Adding to pulse_breakdown_log: 2862 -30 198 1 3502
