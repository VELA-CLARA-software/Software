2018-03-02 09:47:49.645000 *
*** main_controller creating HWC ***
2018-03-02 09:47:52.554000 *
*** llrf_handler setting all SCAN to passive***
2018-03-02 09:47:52.555000 *
*** llrf_handler start_trace_monitoring***
2018-03-02 09:47:52.556000 KLYSTRON_FORWARD_PHASE SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-02 09:47:52.571000 started monitoring KLYSTRON_FORWARD_PHASE
2018-03-02 09:47:52.572000 KLYSTRON_REVERSE_PHASE SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-02 09:47:52.589000 started monitoring KLYSTRON_REVERSE_PHASE
2018-03-02 09:47:52.589000 KLYSTRON_FORWARD_POWER SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-02 09:47:52.605000 started monitoring KLYSTRON_FORWARD_POWER
2018-03-02 09:47:52.606000 added KLYSTRON_FORWARD_POWER to power_traces. [should beKLYSTRON_FORWARD_POWER]
2018-03-02 09:47:52.606000 KLYSTRON_REVERSE_POWER SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-02 09:47:52.621000 started monitoring KLYSTRON_REVERSE_POWER
2018-03-02 09:47:52.621000 added KLYSTRON_REVERSE_POWER to power_traces. [should beKLYSTRON_REVERSE_POWER]
2018-03-02 09:47:52.622000 LRRG_CAVITY_REVERSE_PHASE SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-02 09:47:52.639000 started monitoring LRRG_CAVITY_REVERSE_PHASE
2018-03-02 09:47:52.640000 LRRG_CAVITY_FORWARD_PHASE SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-02 09:47:52.655000 started monitoring LRRG_CAVITY_FORWARD_PHASE
2018-03-02 09:47:52.656000 LRRG_CAVITY_FORWARD_POWER SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-02 09:47:52.672000 started monitoring LRRG_CAVITY_FORWARD_POWER
2018-03-02 09:47:52.672000 added LRRG_CAVITY_FORWARD_POWER to power_traces. [should beLRRG_CAVITY_FORWARD_POWER]
2018-03-02 09:47:52.673000 LRRG_CAVITY_REVERSE_POWER SCAN set to LLRF_SCAN.ZERO_POINT_ONE
2018-03-02 09:47:52.688000 started monitoring LRRG_CAVITY_REVERSE_POWER
2018-03-02 09:47:52.689000 added LRRG_CAVITY_REVERSE_POWER to power_traces. [should beLRRG_CAVITY_REVERSE_POWER]
2018-03-02 09:47:52.690000 *
*** llrf_handler setup_trace_rolling_average***
2018-03-02 09:47:52.690000 starting rolling average for LRRG_CAVITY_REVERSE_PHASE
2018-03-02 09:47:52.692000 STARTED rolling average for LRRG_CAVITY_REVERSE_PHASE
2018-03-02 09:47:52.696000 Set Infinite End Mask by Power 1, power trace = CAVITY_REVERSE_POWER, phase trace = CAVITY_REVERSE_PHASE, power level 5000.0 SUCCESS
2018-03-02 09:47:52.696000 start_llrf_control created CLARA_LRRG, llrf_handler and got full trace names:
2018-03-02 09:47:52.697000 TRACES TO SAVE: KLYSTRON_FORWARD_PHASE KLYSTRON_REVERSE_PHASE KLYSTRON_FORWARD_POWER KLYSTRON_REVERSE_POWER LRRG_CAVITY_REVERSE_PHASE LRRG_CAVITY_FORWARD_PHASE LRRG_CAVITY_FORWARD_POWER LRRG_CAVITY_REVERSE_POWER
2018-03-02 09:47:52.698000 BREAKDOWN_TRACES:LRRG_CAVITY_REVERSE_PHASE
2018-03-02 09:47:56.717000 start_mod_control created a gun modulator object
2018-03-02 09:47:59.250000 start_vac_valve_control created CLARA_PH1 object
2018-03-02 09:48:05.304000 start_rf_prot_control created a protection control  object
2018-03-02 09:48:05.308000 *
*** controller_base has read config***
2018-03-02 09:48:05.330000 config file = test_LLRG.config
dumping data to log
VAC_SPIKE_DECAY_TIME:2000, VAC_CHECK_TIME:200, VAC_SHOULD_DROP_AMP:True, OUTSIDE_MASK_COOLDOWN_TIME:3000, VAC_PV:CLA-LRG1-VAC-IMG-01:P, VAC_MAX_AMP_DROP:7.0, VAC_SPIKE_DECAY_LEVEL:1.2, VAC_DECAY_MODE:LEVEL, VAC_MAX_LEVEL:5e-09, VAC_SPIKE_AMP_DROP:5.0, VAC_SPIKE_DELTA:4e-09, VAC_NUM_SAMPLES_TO_AVERAGE:7, 
DC_SPIKE_DECAY_LEVEL:1.2, DC_PV:EBT-INJ-SCOPE-01:P1, DC_NUM_SAMPLES_TO_AVERAGE:5, DC_SPIKE_AMP_DROP:6.0, OUTSIDE_MASK_COOLDOWN_TIME:3000, DC_SHOULD_DROP_AMP:False, DC_CHECK_TIME:1000, DC_SPIKE_DELTA:0.015, DC_SPIKE_DECAY_TIME:2000, DC_DECAY_MODE:TIMED, 
PULSE_COUNT_BREAKDOWN_LOG_FILENAME:pulse_breakdown_log.txt, OUTSIDE_MASK_FORWARD_FILENAME:outside_forward_log, OUTSIDE_MASK_REVERSE_FILENAME:outside_reverse_log, OUTSIDE_MASK_PROBE_FILENAME:outside_probe_log, LOG_DIRECTORY:C:\Users\dlerlp\Documents\RF_condition_2018\logs_clara_lrrg\, AMP_PWR_LOG_TIME:50, DATA_LOG_TIME:1000, LOG_FILENAME:log.txt, DATA_LOG_FILENAME:data_log, 
VAC_VALVE:S01-VALV-01, VAC_VALVE_AREA:CLARA_PH1, VAC_VALVE_CHECK_TIME:1000, 
WATER_TEMPERATURE_CHECK_TIME:1000, WATER_TEMPERATURE_PV:CLA-GUN-RF-LRRG-01:RT, 
CAVITY_TEMPERATURE_CHECK_TIME:1000, CAVITY_TEMPERATURE_PV:CLA-GUN-RF-LRRG-01:RT, 
5_MEAN_START:2.8, 1_MEAN_START:2.3, DEFAULT_RF_INCREASE_LEVEL:10, BREAKDOWN_RATE_AIM:100, TRACES_TO_SAVE:['KLYSTRON_FORWARD_PHASE', 'KLYSTRON_REVERSE_PHASE', 'KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'LRRG_CAVITY_REVERSE_PHASE', 'LRRG_CAVITY_FORWARD_PHASE', 'LRRG_CAVITY_FORWARD_POWER', 'LRRG_CAVITY_REVERSE_POWER'], NORMAL_POWER_INCREASE:10000, NUMBER_OF_PULSES_IN_BREAKDOWN_HISTORY:1000000, POWER_AIM:0.1, MEAN_TRACES:['KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'LRRG_CAVITY_FORWARD_POWER', 'LRRG_CAVITY_REVERSE_POWER', 'LRRG_CAVITY_REVERSE_PHASE'], 4_MEAN_END:3.1, LOW_POWER_INCREASE_RATE_LIMIT:1000000, DEFAULT_PULSE_COUNT:150, RF_INCREASE_LEVEL:0.001, LLRF_CHECK_TIME:50, RF_REPETITION_RATE:10, 4_MEAN_START:2.9, 5_MEAN_END:3.0, 3_MEAN_END:3.0, 2_MEAN_START:2.3, PULSE_LENGTH_AIM:2500.0, RF_INCREASE_RATE:0.33333, 2_MEAN_END:2.8, EXTRA_TRACES_ON_BREAKDOWN:2, RF_STRUCTURE:CLARA_LRRG, NUM_BUFFER_TRACES:40, 3_MEAN_START:2.5, PULSE_LENGTH_START:100.0, PULSE_LENGTH_STEP:250.0, 1_MEAN_END:2.8, LOW_POWER_INCREASE:1000, TIME_BETWEEN_RF_INCREASES:10, KLY_PWR_FOR_ACTIVE_PULSE:500.0, 
CRP_MASK_FLOOR:0, CRP_AMP_DROP_VAL:2, CRP_S2:3.1, CFP_CHECK_STREAK:10, CFP_AMP_DROP_VAL:3, PHASE_MASK_BY_POWER_POWER_TRACE_1:CAVITY_REVERSE_POWER, CFP_MASK_END:2.0, BREAKDOWN_TRACES:['LRRG_CAVITY_REVERSE_PHASE'], CFP_MASK_LEVEL:35, CFP_MASK_FLOOR:5000, PHASE_MASK_BY_POWER_LEVEL_1:5000.0, CFP_AUTO_SET:False, CRP_MASK_END:4.8, CRP_NUM_AVERAGE_TRACES:2, CRP_S3:3.3, CRP_MASK_SET_TYPE:TIME, CRP_S1:0.8, CRP_AMP_DROP:True, OUTSIDE_MASK_COOLDOWN_TIME:3000, CRP_S4:5.0, PHASE_MASK_BY_POWER_PHASE_TRACE_1:CAVITY_REVERSE_PHASE, CFP_AMP_DROP:False, OUTSIDE_MASK_CHECK_TIME:100, CRP_MASK_LEVEL:35, CRP_CHECK_STREAK:2, CFP_S4:301, CFP_S3:301, CFP_S2:301, CFP_S1:63, CRP_AUTO_SET:False, CFP_MASK_TYPE:PERCENT, CFP_NUM_AVERAGE_TRACES:1, CFP_MASK_SET_TYPE:INDEX, CRP_MASK_TYPE:ABSOLUTE, 
MOD_CHECK_TIME:1000, 
RF_PROT_CHECK_TIME:1000, RF_STRUCTURE:CLARA_LRRG, 
GUI_UPDATE_TIME:1000, 
SOL_PV:CLA-GUN-MAG-SOL-02:READI, SOL_CHECK_TIME:1000, 
2018-03-02 09:48:05.887000 *
*** rf_condition_data pulse_count_breakdown_log ***
2018-03-02 09:48:05.888000 log_pulse_count 1917651
required_pulses 150
breakdown_count 76
log_amp_set 16155
current_ramp_index 237
pulse length = 2.503
next_sp_decrease 16148
2018-03-02 09:48:05.889000 *
*** Last million pulses***
2018-03-02 09:48:05.890000 Million pulses agao  = 917651
2018-03-02 09:48:05.891000 Monitoring RF-PROTECTION
2018-03-02 09:48:07.518000 Monitoring VAC-VALVE
2018-03-02 09:48:07.520000 Monitoring MODULATOR
2018-03-02 09:48:08.557000 data_monitoring Connected to PV = CLA-GUN-RF-LRRG-01:RT with ID = d0 acquiring data
2018-03-02 09:48:08.561000 Monitoring CAVITY TEMPERATURE
2018-03-02 09:48:09.607000 data_monitoring Connected to PV = CLA-GUN-RF-LRRG-01:RT with ID = d1 acquiring data
2018-03-02 09:48:09.611000 Monitoring WATER TEMP
2018-03-02 09:48:10.654000 data_monitoring Connected to PV = CLA-GUN-MAG-SOL-02:READI with ID = d2 acquiring data
2018-03-02 09:48:10.655000 Monitoring SOLENOID READI
2018-03-02 09:48:11.732000 data_monitoring Connected to PV = CLA-LRG1-VAC-IMG-01:P with ID = d3 acquiring data
2018-03-02 09:48:11.736000 vac_spike_monitor will drop amp on spike detection
2018-03-02 09:48:11.741000 vac_spike_monitor STARTED running
2018-03-02 09:48:11.745000 Monitoring VACUUM
2018-03-02 09:48:12.786000 data_monitoring Connected to PV = EBT-INJ-SCOPE-01:P1 with ID = d4 acquiring data
2018-03-02 09:48:12.790000 dc_spike_monitor will NOT drop amp on spike detection
2018-03-02 09:48:12.794000 dc_spike_monitor STARTED running
2018-03-02 09:48:12.798000 Monitoring DC
2018-03-02 09:48:12.802000 llrf_simple_param_monitor adding KLYSTRON_FORWARD_POWER to mean trace list
2018-03-02 09:48:12.804000 llrf_simple_param_monitor adding KLYSTRON_REVERSE_POWER to mean trace list
2018-03-02 09:48:12.805000 llrf_simple_param_monitor adding LRRG_CAVITY_FORWARD_POWER to mean trace list
2018-03-02 09:48:12.806000 llrf_simple_param_monitor adding LRRG_CAVITY_REVERSE_POWER to mean trace list
2018-03-02 09:48:12.807000 llrf_simple_param_monitor adding LRRG_CAVITY_REVERSE_PHASE to mean trace list
2018-03-02 09:48:12.808000 Monitoring llrf
2018-03-02 09:48:12.809000 Monitoring outside_masks
2018-03-02 09:48:12.848000 gui_conditioning has disabled ramping RF
2018-03-02 09:48:14.422000 *
*** llrf_handler set_mean_pwr_position***
2018-03-02 09:48:14.425000 rf pulse end time = 2.95347675314, index = 318
pulse_latency     = 50
.getPulseLength() = 2.50325163834
2018-03-02 09:48:14.427000 KLYSTRON_FORWARD_POWER found in config file
2018-03-02 09:48:14.429000 KLYSTRON_FORWARD_POWER mean monitoring started
2018-03-02 09:48:14.431000 trace_mean_start/end (us) = 2.3/2.8
meantime = 0.5
2018-03-02 09:48:14.433000 KLYSTRON_REVERSE_POWER found in config file
2018-03-02 09:48:14.436000 KLYSTRON_REVERSE_POWER mean monitoring started
2018-03-02 09:48:14.438000 trace_mean_start/end (us) = 2.3/2.8
meantime = 0.5
2018-03-02 09:48:14.440000 LRRG_CAVITY_FORWARD_POWER found in config file
2018-03-02 09:48:14.445000 LRRG_CAVITY_FORWARD_POWER mean monitoring started
2018-03-02 09:48:14.447000 trace_mean_start/end (us) = 2.5/3.0
meantime = 0.5
2018-03-02 09:48:14.449000 LRRG_CAVITY_REVERSE_POWER found in config file
2018-03-02 09:48:14.451000 LRRG_CAVITY_REVERSE_POWER mean monitoring started
2018-03-02 09:48:14.453000 trace_mean_start/end (us) = 2.9/3.1
meantime = 0.2
2018-03-02 09:48:14.454000 LRRG_CAVITY_REVERSE_PHASE found in config file
2018-03-02 09:48:14.455000 LRRG_CAVITY_REVERSE_PHASE mean monitoring started
2018-03-02 09:48:14.457000 trace_mean_start/end (us) = 2.8/3.0
meantime = 0.2
2018-03-02 09:48:14.458000 LRRG_CAVITY_REVERSE_PHASE, streak = 2, floor = 0, drop = True, drop_val= 2, update func = <bound method llrf_handler.time_absolute_mask of <controllers.llrf_handler.llrf_handler object at 0x02E0D910>>
2018-03-02 09:48:14.459000 setNumContinuousOutsideMaskCount = True
2018-03-02 09:48:14.461000 setMaskFloor = True
2018-03-02 09:48:14.461000 LRRG_CAVITY_REVERSE_PHASE, setShouldCheckMask = True
2018-03-02 09:48:14.462000 LRRG_CAVITY_REVERSE_PHASE, setDropAmpOnOutsideMaskDetection = True
2018-03-02 09:48:14.479000 *
*** main_controller The RF Conditioning is Preparing to Entering Main_Loop !***
2018-03-02 09:48:15.492000 set_amp = 16155, took 0.00839995824213 time,  averages NOT reset, mask_set = False
2018-03-02 09:48:15.496000 Adding to pulse_breakdown_log =  1917870 76 16155 237 2503
2018-03-02 09:48:16.505000 set_global_check_mask setGlobalCheckMask True
2018-03-02 09:48:16.509000 llrf_handler cant set mask, NO AVERAGE Traces
2018-03-02 09:48:16.653000 LRRG_CAVITY_REVERSE_PHASE, set time_absolute_mask
2018-03-02 09:48:16.654000 llrf_handler has set mask 
2018-03-02 09:51:11.960000 set_global_check_mask setGlobalCheckMask True
2018-03-02 09:51:11.961000 set_global_check_mask setGlobalCheckMask True
2018-03-02 09:51:12.009000 *
*** outside_mask_trace_monitor NEW OUTSIDE MASK TRACE DETECTED***
2018-03-02 09:51:12.011000 rf_condition_data increasing breakdown count = 77
2018-03-02 09:51:12.013000 Adding to pulse_breakdown_log =  1919642 77 16155 237 2503
2018-03-02 09:51:12.015000 new outside_mask_trace = LRRG_CAVITY_REVERSE_PHASE, count = 0
2018-03-02 09:51:12.231000 LRRG_CAVITY_REVERSE_PHASE LO MASK FAIL: current average = 123.377, 88.035 < 88.377 at i = 325 us = 3.01651, EVID NOT_SET, previous EVID = 177525479
2018-03-02 09:51:12.233000 data_logger pickle_dumping to C:\Users\dlerlp\Documents\RF_condition_2018\logs_clara_lrrg\2018-03-02-09-47-48\outside_reverse_log1
2018-03-02 09:51:12.311000 Saved outside_mask_data part = 0
2018-03-02 09:51:15.036000 set_amp = 16155, took 0.0159940835204 time,  averages NOT reset, mask_set = False
2018-03-02 09:51:15.037000 Adding to pulse_breakdown_log =  1919642 77 16155 237 2503
2018-03-02 09:51:15.039000 llrf_handler cant set mask - kly fwd power low
2018-03-02 09:51:15.040000 llrf_handler has set mask 
2018-03-02 09:51:15.353000 set_global_check_mask setGlobalCheckMask True
2018-03-02 09:51:15.354000 set_global_check_mask setGlobalCheckMask True
2018-03-02 09:51:15.393000 *
*** outside_mask_trace_monitor NEW OUTSIDE MASK TRACE DETECTED***
2018-03-02 09:51:15.396000 rf_condition_data increasing breakdown count = 78
2018-03-02 09:51:15.398000 Adding to pulse_breakdown_log =  1919644 78 16155 237 2503
2018-03-02 09:51:15.399000 new outside_mask_trace = LRRG_CAVITY_REVERSE_PHASE, count = 1
2018-03-02 09:51:15.504000 *
*** outside_mask_trace_monitor NEW OUTSIDE MASK TRACE DETECTED***
2018-03-02 09:51:15.506000 rf_condition_data NOT increasing breakdown count, already in cooldown, = 78
2018-03-02 09:51:15.507000 new outside_mask_trace = LRRG_CAVITY_REVERSE_PHASE, count = 2
2018-03-02 09:51:15.614000 LRRG_CAVITY_REVERSE_PHASE HI MASK FAIL: current average = 192.728, 228.481 > 227.728 at i = 286 us = 2.66533, EVID NOT_SET, previous EVID = 177525514
2018-03-02 09:51:15.615000 data_logger pickle_dumping to C:\Users\dlerlp\Documents\RF_condition_2018\logs_clara_lrrg\2018-03-02-09-47-48\outside_reverse_log2
2018-03-02 09:51:15.693000 Saved outside_mask_data part = 1
2018-03-02 09:51:15.698000 LRRG_CAVITY_REVERSE_PHASE HI MASK FAIL: current average = 254.239, 313.001 > 289.239 at i = 80 us = 0.810405, EVID NOT_SET, previous EVID = 177525515
2018-03-02 09:51:15.699000 data_logger pickle_dumping to C:\Users\dlerlp\Documents\RF_condition_2018\logs_clara_lrrg\2018-03-02-09-47-48\outside_reverse_log3
2018-03-02 09:51:15.779000 Saved outside_mask_data part = 2
2018-03-02 09:51:18.534000 Not adding to pulse_breakdown_log, amp = 2.0
