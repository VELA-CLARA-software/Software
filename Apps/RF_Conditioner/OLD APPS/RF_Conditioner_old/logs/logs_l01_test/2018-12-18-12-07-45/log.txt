2018-12-18 12:07:46.173000 *
*** main_controller creating HWC ***
2018-12-18 12:07:48.306000 *
*** llrf_handler setting all SCAN to passive***
2018-12-18 12:07:48.309000 *
*** llrf_handler start_trace_monitoring()***
2018-12-18 12:07:48.393000 *
*** llrf_handler setup_trace_rolling_average***
2018-12-18 12:07:48.394000 starting rolling average for L01_CAVITY_REVERSE_PHASE (CRPHA)
2018-12-18 12:07:48.396000 STARTED rolling average for L01_CAVITY_REVERSE_PHASE
2018-12-18 12:07:48.396000 RollingAverageSize = 5
2018-12-18 12:07:48.398000 RollingAverageCount = 1
2018-12-18 12:07:48.399000 starting rolling average for L01_CAVITY_FORWARD_POWER (CFPOW)
2018-12-18 12:07:48.401000 STARTED rolling average for L01_CAVITY_FORWARD_POWER
2018-12-18 12:07:48.403000 RollingAverageSize = 5
2018-12-18 12:07:48.404000 RollingAverageCount = 0
2018-12-18 12:07:48.406000 Set Infinite End Mask by Power 1, power trace = CAVITY_REVERSE_POWER, phase trace = CAVITY_REVERSE_PHASE, power level 5000.0 FAIL
2018-12-18 12:07:48.407000 start_llrf_control created L01, llrf_handler and got full trace names:
2018-12-18 12:07:48.409000 TRACES TO SAVE: KLYSTRON_FORWARD_PHASE KLYSTRON_REVERSE_PHASE KLYSTRON_FORWARD_POWER KLYSTRON_REVERSE_POWER L01_CAVITY_REVERSE_PHASE L01_CAVITY_FORWARD_PHASE L01_CAVITY_FORWARD_POWER L01_CAVITY_REVERSE_POWER L01_CAVITY_PROBE_POWER L01_CAVITY_PROBE_POWER
2018-12-18 12:07:48.410000 BREAKDOWN_TRACES:L01_CAVITY_REVERSE_PHASE L01_CAVITY_FORWARD_POWER
2018-12-18 12:07:52.430000 start_mod_control created a L01  modulator object
2018-12-18 12:07:54.960000 start_vac_valve_control created CLARA_PH1 object
2018-12-18 12:07:54.962000 start_rf_prot_control did not create a protection control  object
2018-12-18 12:07:54.963000 *
*** controller_base has read config***
2018-12-18 12:07:54.964000 config file = test_L01.config
dumping data to log
VAC_SPIKE_DECAY_TIME:2000, VAC_CHECK_TIME:200, VAC_SHOULD_DROP_AMP:True, OUTSIDE_MASK_COOLDOWN_TIME:3000, VAC_PV:EBT-HRG1-VAC-IMG-01:PRES, VAC_MAX_AMP_DROP:7.0, VAC_SPIKE_DECAY_LEVEL:1.2, VAC_DECAY_MODE:LEVEL, VAC_MAX_LEVEL:5e-09, VAC_SPIKE_AMP_DROP:5.0, VAC_SPIKE_DELTA:4e-09, VAC_NUM_SAMPLES_TO_AVERAGE:7, 
DC_SPIKE_DECAY_LEVEL:1.2, DC_PV:CLA-S01-DIA-WCM-01:Q, DC_NUM_SAMPLES_TO_AVERAGE:5, DC_SPIKE_AMP_DROP:6.0, OUTSIDE_MASK_COOLDOWN_TIME:3000, DC_SHOULD_DROP_AMP:True, DC_CHECK_TIME:1000, DC_SPIKE_DELTA:10.015, DC_SPIKE_DECAY_TIME:2000, DC_DECAY_MODE:TIMED, 
PULSE_COUNT_BREAKDOWN_LOG_FILENAME:pulse_breakdown_log.txt, OUTSIDE_MASK_FORWARD_FILENAME:outside_forward_log, OUTSIDE_MASK_REVERSE_FILENAME:outside_reverse_log, OUTSIDE_MASK_PROBE_FILENAME:outside_probe_log, LOG_DIRECTORY:D:\VELA\GIT Projects\Software\Apps\RF_Conditioner\logs_l01_test\, AMP_PWR_LOG_TIME:2000, DATA_LOG_TIME:1000, LOG_FILENAME:log.txt, AMP_POWER_LOG_FILENAME:amp_power_log.txt, DATA_LOG_FILENAME:data_log, 
VAC_VALVE:S01-VALV-01, VAC_VALVE_AREA:CLARA_PH1, VAC_VALVE_CHECK_TIME:1000, 
WATER_TEMPERATURE_CHECK_TIME:1000, WATER_TEMPERATURE_PV:CLA-GUN-RF-LRRG-01:RT, 
CAVITY_TEMPERATURE_CHECK_TIME:1000, CAVITY_TEMPERATURE_PV:CLA-GUN-RF-LRRG-01:RT, 
5_MEAN_START:1.0, 6_MEAN_END:1.15, 1_MEAN_START:1.0, DEFAULT_RF_INCREASE_LEVEL:10, BREAKDOWN_RATE_AIM:100, TRACES_TO_SAVE:['KLYSTRON_FORWARD_PHASE', 'KLYSTRON_REVERSE_PHASE', 'KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'L01_CAVITY_REVERSE_PHASE', 'L01_CAVITY_FORWARD_PHASE', 'L01_CAVITY_FORWARD_POWER', 'L01_CAVITY_REVERSE_POWER', 'L01_CAVITY_PROBE_POWER', 'L01_CAVITY_PROBE_POWER'], NORMAL_POWER_INCREASE:10000, NUMBER_OF_PULSES_IN_BREAKDOWN_HISTORY:1000000, POWER_AIM:0.1, MEAN_TRACES:['KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'L01_CAVITY_FORWARD_POWER', 'L01_CAVITY_REVERSE_POWER', 'L01_CAVITY_REVERSE_PHASE', 'L01_CAVITY_PROBE_POWER'], 4_MEAN_END:1.15, LOW_POWER_INCREASE_RATE_LIMIT:1000000, DEFAULT_PULSE_COUNT:500, RF_INCREASE_LEVEL:0.001, 6_MEAN_START:1.0, LLRF_CHECK_TIME:50, RF_REPETITION_RATE:10, 4_MEAN_START:1.0, 5_MEAN_END:1.15, 3_MEAN_END:1.15, 2_MEAN_START:1.0, PULSE_LENGTH_AIM:2500.0, RF_INCREASE_RATE:0.33333, 2_MEAN_END:1.15, EXTRA_TRACES_ON_BREAKDOWN:2, RF_STRUCTURE:L01, NUM_BUFFER_TRACES:500, 3_MEAN_START:1.0, PULSE_LENGTH_START:100.0, PULSE_LENGTH_STEP:250.0, 1_MEAN_END:1.15, LOW_POWER_INCREASE:1000, TIME_BETWEEN_RF_INCREASES:10, KLY_PWR_FOR_ACTIVE_PULSE:500.0, 
CRPHA_CHECK_STREAK:10, KFPOW_MASK_TYPE:PERCENT, CFPOW_MASK_LEVEL:25, PHASE_MASK_BY_POWER_POWER_TRACE_1:CAVITY_REVERSE_POWER, BREAKDOWN_TRACES:['L01_CAVITY_REVERSE_PHASE', 'L01_CAVITY_FORWARD_POWER'], CRPHA_MASK_TYPE:ABSOLUTE, KFPOW_MASK_FLOOR:5000, CFPOW_AMP_DROP_VALUE:4, PHASE_MASK_BY_POWER_LEVEL_1:5000.0, CFPOW_MASK_WINDOW_START:300, KFPOW_MASK_ABS_MIN:500, CFPOW_MASK_WINDOW_END:301, OUTSIDE_MASK_COOLDOWN_TIME:3000, PHASE_MASK_BY_POWER_PHASE_TRACE_1:CAVITY_REVERSE_PHASE, OUTSIDE_MASK_CHECK_TIME:100, KFPOW_MASK_SET_TYPE:INDEX, CFPOW_MASK_TYPE:PERCENT, CRPHA_MASK_START:63, CRPHA_MASK_END:86, KFPOW_MASK_END:86, CRPHA_NUM_AVERAGE_TRACES:5, CRPHA_MASK_LEVEL:35, CRPHA_DROP_AMP:True, CFPOW_MASK_FLOOR:5000, CRPHA_MASK_SET_TYPE:INDEX, CFPOW_DROP_AMP:True, CFPOW_NUM_AVERAGE_TRACES:5, CFPOW_CHECK_STREAK:10, CRPHA_MASK_FLOOR:5000, CRPHA_MASK_WINDOW_END:301, KFPOW_MASK_WINDOW_END:301, CRPHA_AMP_DROP_VALUE:3, KFPOW_AUTO_SET:False, CRPHA_MASK_WINDOW_START:300, CFPOW_MASK_SET_TYPE:INDEX, KFPOW_CHECK_STREAK:10, KFPOW_AMP_DROP_VALUE:4, CRPHA_AUTO_SET:False, CFPOW_AUTO_SET:False, KFPOW_NUM_AVERAGE_TRACES:5, KFPOW_MASK_LEVEL:10, CFPOW_MASK_START:63, CFPOW_MASK_END:86, KFPOW_MASK_WINDOW_START:300, KFPOW_DROP_AMP:True, KFPOW_MASK_START:63, CFPOW_MASK_ABS_MIN:500, CRPHA_MASK_ABS_MIN:0, 
MOD_CHECK_TIME:1000, 
RF_PROT_CHECK_TIME:1000, RF_STRUCTURE:L01, 
GUI_UPDATE_TIME:1000, 
SOL_PV:CLA-GUN-MAG-SOL-02:READI, SOL_CHECK_TIME:1000, 
2018-12-18 12:07:54.968000 *
*** rf_condition_data pulse_count_breakdown_log ***
2018-12-18 12:07:54.969000 log_pulse_count 20966
required_pulses 500
breakdown_count 2
log_amp_set 665
current_ramp_index 37
pulse length = 0.702
next_sp_decrease 659
2018-12-18 12:07:54.969000 *
*** Last million pulses***
2018-12-18 12:07:54.970000 Million pulses agao  = -979034
2018-12-18 12:07:54.980000 Not monitoring RF-PROTECTION rfprot_monitor failed
2018-12-18 12:07:54.981000 Monitoring VAC-VALVE
2018-12-18 12:07:54.983000 Monitoring MODULATOR
2018-12-18 12:07:56.024000 data_monitoring Connected to PV = CLA-GUN-RF-LRRG-01:RT with ID = d0 acquiring data
2018-12-18 12:07:56.026000 Monitoring CAVITY TEMPERATURE
2018-12-18 12:07:57.077000 data_monitoring Connected to PV = CLA-GUN-RF-LRRG-01:RT with ID = d1 acquiring data
2018-12-18 12:07:57.078000 Monitoring WATER TEMP
2018-12-18 12:07:58.125000 data_monitoring Connected to PV = CLA-GUN-MAG-SOL-02:READI with ID = d2 acquiring data
2018-12-18 12:07:58.127000 Monitoring SOLENOID READI
2018-12-18 12:07:59.177000 data_monitoring Connected to PV = EBT-HRG1-VAC-IMG-01:PRES with ID = d3 acquiring data
2018-12-18 12:07:59.179000 vac_spike_monitor will drop amp on spike detection
2018-12-18 12:07:59.181000 vac_spike_monitor STARTED running
2018-12-18 12:07:59.182000 vac_spike_monitor vac_spike_status UNKNOWN
2018-12-18 12:07:59.184000 vac_spike_monitor vac_spike_status GOOD
2018-12-18 12:07:59.185000 Monitoring VACUUM
2018-12-18 12:08:00.228000 data_monitoring Connected to PV = CLA-S01-DIA-WCM-01:Q with ID = d4 acquiring data
2018-12-18 12:08:00.230000 dc_spike_monitor will drop amp on spike detection
2018-12-18 12:08:00.232000 dc_spike_monitor STARTED running
2018-12-18 12:08:00.233000 dc_spike_monitor DC_spike_status UNKNOWN
2018-12-18 12:08:00.235000 dc_spike_monitor DC_spike_status GOOD
2018-12-18 12:08:00.236000 Monitoring DC
2018-12-18 12:08:00.238000 llrf_simple_param_monitor adding KLYSTRON_FORWARD_POWER to mean trace list
2018-12-18 12:08:00.240000 llrf_simple_param_monitor adding KLYSTRON_REVERSE_POWER to mean trace list
2018-12-18 12:08:00.241000 llrf_simple_param_monitor adding L01_CAVITY_FORWARD_POWER to mean trace list
2018-12-18 12:08:00.243000 llrf_simple_param_monitor adding L01_CAVITY_REVERSE_POWER to mean trace list
2018-12-18 12:08:00.244000 llrf_simple_param_monitor adding L01_CAVITY_REVERSE_PHASE to mean trace list
2018-12-18 12:08:00.246000 llrf_simple_param_monitor adding L01_CAVITY_PROBE_POWER to mean trace list
2018-12-18 12:08:00.248000 Monitoring llrf
2018-12-18 12:08:00.250000 Monitoring outside_masks
2018-12-18 12:08:00.311000 gui_conditioning has disabled ramping RF
2018-12-18 12:08:00.363000 *
*** main_controller Loading amp_set vs Kly_fwd_pow dictionary***
2018-12-18 12:08:00.364000 Data: 64018658716.5491078208903167.539
2018-12-18 12:08:00.365000 Data: 51636138023.4130737246675140.553
2018-12-18 12:08:00.366000 Data: 64839259821.2048697425878028.172
2018-12-18 12:08:00.367000 Data: 65348760956.0198312604689503.581
2018-12-18 12:08:00.368000 Data: 52646639403.1689172393643989.942
2018-12-18 12:08:00.370000 Data: 64448859921.9758007621683268.364
2018-12-18 12:08:00.371000 Data: 65939463176.0136949477100480.566
2018-12-18 12:08:00.373000 Data: 66549763362.6779937675281415.32
2018-12-18 12:08:00.375000 Data: 53636141300.0957687290213382.056
2018-12-18 12:08:00.377000 Data: 53746641320.7867879380160224.207
2018-12-18 12:08:00.378000 Data: 66760163400.3698805724526650.439
2018-12-18 12:08:00.380000 Data: 670407864478.79134069478087527.51
2018-12-18 12:08:00.382000 Data: 54336042591.2304072273499813.411
2018-12-18 12:08:00.383000 Data: 54846043599.3182252374829196.976
2018-12-18 12:08:00.384000 Data: 55336744632.6641737362917548.501
2018-12-18 12:08:00.385000 Data: 68339466702.3209616507518634.639
2018-12-18 12:08:00.386000 Data: 55746344719.9126898405752306.391
2018-12-18 12:08:00.388000 Data: 68729368524.2162008412758231.056
2018-12-18 12:08:00.389000 Data: 56119746539.9595243159016664.562
2018-12-18 12:08:00.390000 Data: 56248446458.7378436439372863.056
2018-12-18 12:08:00.392000 Data: 56638546486.7469941372158776.077
2018-12-18 12:08:00.393000 Data: 56755846427.712752639890594.41
2018-12-18 12:08:00.395000 Data: 56948946733.8124151448974071.672
2018-12-18 12:08:00.396000 Data: 63448957447.7876889600978265.24
2018-12-18 12:08:00.397000 Data: 61838855067.5970727548570109.513
2018-12-18 12:08:00.399000 Data: 62348955972.8130681526516180.073
2018-12-18 12:08:00.400000 Data: 62838655909.2586093448847064.079
2018-12-18 12:08:00.401000 Data: 62939656914.9951533411565181.785
2018-12-18 12:08:00.402000 Data: 63048956875.256741573027408.575
2018-12-18 12:08:00.403000 Data: 50659436980.7080619421937924.345
2018-12-18 12:08:00.403000 Data: 63938758736.3654697447594264.991
2018-12-18 12:08:00.605000 *
*** llrf_handler set_mean_pwr_position***
2018-12-18 12:08:00.606000 rf pulse end time = 0.702351179101, index = 68
pulse_latency     = 0
.getPulseLength() = 0.702351179101
2018-12-18 12:08:00.608000 KLYSTRON_FORWARD_POWER found in config file
2018-12-18 12:08:00.610000 KLYSTRON_FORWARD_POWER mean monitoring started
2018-12-18 12:08:00.611000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-18 12:08:00.613000 KLYSTRON_REVERSE_POWER found in config file
2018-12-18 12:08:00.614000 KLYSTRON_REVERSE_POWER mean monitoring started
2018-12-18 12:08:00.616000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-18 12:08:00.617000 L01_CAVITY_FORWARD_POWER found in config file
2018-12-18 12:08:00.619000 L01_CAVITY_FORWARD_POWER mean monitoring started
2018-12-18 12:08:00.620000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-18 12:08:00.622000 L01_CAVITY_REVERSE_POWER found in config file
2018-12-18 12:08:00.623000 L01_CAVITY_REVERSE_POWER mean monitoring started
2018-12-18 12:08:00.625000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-18 12:08:00.626000 L01_CAVITY_REVERSE_PHASE found in config file
2018-12-18 12:08:00.628000 L01_CAVITY_REVERSE_PHASE mean monitoring started
2018-12-18 12:08:00.630000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-18 12:08:00.631000 L01_CAVITY_PROBE_POWER found in config file
2018-12-18 12:08:00.633000 L01_CAVITY_PROBE_POWER mean monitoring started
2018-12-18 12:08:00.634000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-18 12:08:00.635000 set_mask_dict CRPHA
2018-12-18 12:08:00.637000 L01_CAVITY_REVERSE_PHASE, streak = 10, drop = True, drop_val= 3, update func = <bound method llrf_handler.update_mask of <src.controllers.llrf_handler.llrf_handler object at 0x0D1B34D0>>
2018-12-18 12:08:00.638000 setNumContinuousOutsideMaskCount = True
2018-12-18 12:08:00.639000 L01_CAVITY_REVERSE_PHASE, setShouldCheckMask = True
2018-12-18 12:08:00.640000 L01_CAVITY_REVERSE_PHASE, setDropAmpOnOutsideMaskEvent = True
2018-12-18 12:08:00.641000 L01_CAVITY_REVERSE_PHASE, set index_mask
2018-12-18 12:08:00.642000 set_mask_dict CFPOW
2018-12-18 12:08:00.643000 L01_CAVITY_FORWARD_POWER, streak = 10, drop = True, drop_val= 4, update func = <bound method llrf_handler.update_mask of <src.controllers.llrf_handler.llrf_handler object at 0x0D1B34D0>>
2018-12-18 12:08:00.644000 setNumContinuousOutsideMaskCount = True
2018-12-18 12:08:00.645000 L01_CAVITY_FORWARD_POWER, setShouldCheckMask = True
2018-12-18 12:08:00.646000 L01_CAVITY_FORWARD_POWER, setDropAmpOnOutsideMaskEvent = True
2018-12-18 12:08:00.647000 L01_CAVITY_FORWARD_POWER, set index_mask
2018-12-18 12:08:00.650000 *
*** main_controller The RF Conditioning is Preparing to Entering Main_Loop !***
2018-12-18 12:08:01.667000 set_amp = 665, took 0.0163136121934 time,  averages NOT reset, mask_set = False
2018-12-18 12:08:01.669000 Adding to pulse_breakdown_log: 20994 2 665 37 702
2018-12-18 12:08:02.672000 Found RF power, kly_fwd_power_max = 70102.4001763
2018-12-18 12:08:02.673000 *
*** MASK SETTINGS***
2018-12-18 12:08:02.675000 L01_CAVITY_REVERSE_PHASE
2018-12-18 12:08:02.677000 isCheckingMask = False
2018-12-18 12:08:02.678000 Start = 0.65732866762(63)
2018-12-18 12:08:02.680000 End   = 0.864432220432(86)
2018-12-18 12:08:02.683000 Window Start = 2.79139571181(300)
2018-12-18 12:08:02.684000 Window End   = 2.80040021411(301)
2018-12-18 12:08:02.686000 Value = 35.0
2018-12-18 12:08:02.687000 Floor = 5000.0
2018-12-18 12:08:02.689000 IsPercent  = False
2018-12-18 12:08:02.690000 IsAbsolute = True
2018-12-18 12:08:02.692000 L01_CAVITY_FORWARD_POWER
2018-12-18 12:08:02.693000 isCheckingMask = True
2018-12-18 12:08:02.695000 Start = 0.65732866762(63)
2018-12-18 12:08:02.696000 End   = 0.864432220432(86)
2018-12-18 12:08:02.698000 Window Start = 2.79139571181(300)
2018-12-18 12:08:02.699000 Window End   = 2.80040021411(301)
2018-12-18 12:08:02.701000 Value = 25.0
2018-12-18 12:08:02.702000 Floor = 5000.0
2018-12-18 12:08:02.704000 IsPercent  = True
2018-12-18 12:08:02.705000 IsAbsolute = False
2018-12-18 12:08:02.707000 isGlobalCheckMask = False
2018-12-18 12:08:02.708000 *
*** ROLLING AVERAGE SETTINGS***
2018-12-18 12:08:02.708000 L01_CAVITY_REVERSE_PHASE
2018-12-18 12:08:02.710000 isKeepingRollingAverage = True
2018-12-18 12:08:02.711000 hasRollingAverage = True
2018-12-18 12:08:02.712000 RollingAverageSize = 5
2018-12-18 12:08:02.713000 RollingAverageCount = 5
2018-12-18 12:08:02.715000 L01_CAVITY_FORWARD_POWER
2018-12-18 12:08:02.716000 isKeepingRollingAverage = True
2018-12-18 12:08:02.717000 hasRollingAverage = True
2018-12-18 12:08:02.718000 RollingAverageSize = 5
2018-12-18 12:08:02.719000 RollingAverageCount = 5
2018-12-18 12:08:02.720000 set_global_check_mask setGlobalCheckMask True
2018-12-18 12:08:02.722000 Adding to pulse_breakdown_log: 20994 2 665 37 702
