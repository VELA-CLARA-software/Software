2018-12-17 15:45:27.268000 *
*** main_controller creating HWC ***
2018-12-17 15:45:29.451000 *
*** llrf_handler setting all SCAN to passive***
2018-12-17 15:45:29.455000 *
*** llrf_handler start_trace_monitoring()***
2018-12-17 15:45:29.529000 *
*** llrf_handler setup_trace_rolling_average***
2018-12-17 15:45:29.530000 starting rolling average for L01_CAVITY_REVERSE_PHASE (CRPHA)
2018-12-17 15:45:29.531000 STARTED rolling average for L01_CAVITY_REVERSE_PHASE
2018-12-17 15:45:29.532000 RollingAverageSize = 5
2018-12-17 15:45:29.533000 RollingAverageCount = 0
2018-12-17 15:45:29.534000 starting rolling average for L01_CAVITY_FORWARD_POWER (CFPOW)
2018-12-17 15:45:29.535000 STARTED rolling average for L01_CAVITY_FORWARD_POWER
2018-12-17 15:45:29.536000 RollingAverageSize = 5
2018-12-17 15:45:29.536000 RollingAverageCount = 0
2018-12-17 15:45:29.537000 Set Infinite End Mask by Power 1, power trace = CAVITY_REVERSE_POWER, phase trace = CAVITY_REVERSE_PHASE, power level 5000.0 FAIL
2018-12-17 15:45:29.538000 start_llrf_control created L01, llrf_handler and got full trace names:
2018-12-17 15:45:29.538000 TRACES TO SAVE: KLYSTRON_FORWARD_PHASE KLYSTRON_REVERSE_PHASE KLYSTRON_FORWARD_POWER KLYSTRON_REVERSE_POWER L01_CAVITY_REVERSE_PHASE L01_CAVITY_FORWARD_PHASE L01_CAVITY_FORWARD_POWER L01_CAVITY_REVERSE_POWER L01_CAVITY_PROBE_POWER L01_CAVITY_PROBE_POWER
2018-12-17 15:45:29.539000 BREAKDOWN_TRACES:L01_CAVITY_REVERSE_PHASE L01_CAVITY_FORWARD_POWER
2018-12-17 15:45:33.549000 start_mod_control created a L01  modulator object
2018-12-17 15:45:36.076000 start_vac_valve_control created CLARA_PH1 object
2018-12-17 15:45:36.078000 start_rf_prot_control did not create a protection control  object
2018-12-17 15:45:36.079000 *
*** controller_base has read config***
2018-12-17 15:45:36.081000 config file = test_L01.config
dumping data to log
VAC_SPIKE_DECAY_TIME:2000, VAC_CHECK_TIME:200, VAC_SHOULD_DROP_AMP:True, OUTSIDE_MASK_COOLDOWN_TIME:3000, VAC_PV:CLA-LRG1-VAC-IMG-01:P, VAC_MAX_AMP_DROP:7.0, VAC_SPIKE_DECAY_LEVEL:1.2, VAC_DECAY_MODE:LEVEL, VAC_MAX_LEVEL:5e-09, VAC_SPIKE_AMP_DROP:5.0, VAC_SPIKE_DELTA:4e-09, VAC_NUM_SAMPLES_TO_AVERAGE:7, 
DC_SPIKE_DECAY_LEVEL:1.2, DC_PV:CLA-S01-DIA-WCM-01:Q, DC_NUM_SAMPLES_TO_AVERAGE:5, DC_SPIKE_AMP_DROP:6.0, OUTSIDE_MASK_COOLDOWN_TIME:3000, DC_SHOULD_DROP_AMP:True, DC_CHECK_TIME:1000, DC_SPIKE_DELTA:10.015, DC_SPIKE_DECAY_TIME:2000, DC_DECAY_MODE:TIMED, 
PULSE_COUNT_BREAKDOWN_LOG_FILENAME:pulse_breakdown_log.txt, OUTSIDE_MASK_FORWARD_FILENAME:outside_forward_log, OUTSIDE_MASK_REVERSE_FILENAME:outside_reverse_log, OUTSIDE_MASK_PROBE_FILENAME:outside_probe_log, LOG_DIRECTORY:D:\VELA\GIT Projects\Software\Apps\RF_Conditioner\logs_l01_test\, AMP_PWR_LOG_TIME:2000, DATA_LOG_TIME:1000, LOG_FILENAME:log.txt, AMP_POWER_LOG_FILENAME:amp_power_log.txt, DATA_LOG_FILENAME:data_log, 
VAC_VALVE:S01-VALV-01, VAC_VALVE_AREA:CLARA_PH1, VAC_VALVE_CHECK_TIME:1000, 
WATER_TEMPERATURE_CHECK_TIME:1000, WATER_TEMPERATURE_PV:CLA-GUN-RF-LRRG-01:RT, 
CAVITY_TEMPERATURE_CHECK_TIME:1000, CAVITY_TEMPERATURE_PV:CLA-GUN-RF-LRRG-01:RT, 
5_MEAN_START:1.0, 6_MEAN_END:1.15, 1_MEAN_START:1.0, DEFAULT_RF_INCREASE_LEVEL:10, BREAKDOWN_RATE_AIM:100, TRACES_TO_SAVE:['KLYSTRON_FORWARD_PHASE', 'KLYSTRON_REVERSE_PHASE', 'KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'L01_CAVITY_REVERSE_PHASE', 'L01_CAVITY_FORWARD_PHASE', 'L01_CAVITY_FORWARD_POWER', 'L01_CAVITY_REVERSE_POWER', 'L01_CAVITY_PROBE_POWER', 'L01_CAVITY_PROBE_POWER'], NORMAL_POWER_INCREASE:10000, NUMBER_OF_PULSES_IN_BREAKDOWN_HISTORY:1000000, POWER_AIM:0.1, MEAN_TRACES:['KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'L01_CAVITY_FORWARD_POWER', 'L01_CAVITY_REVERSE_POWER', 'L01_CAVITY_REVERSE_PHASE', 'L01_CAVITY_PROBE_POWER'], 4_MEAN_END:1.15, LOW_POWER_INCREASE_RATE_LIMIT:1000000, DEFAULT_PULSE_COUNT:500, RF_INCREASE_LEVEL:0.001, 6_MEAN_START:1.0, LLRF_CHECK_TIME:50, RF_REPETITION_RATE:10, 4_MEAN_START:1.0, 5_MEAN_END:1.15, 3_MEAN_END:1.15, 2_MEAN_START:1.0, PULSE_LENGTH_AIM:2500.0, RF_INCREASE_RATE:0.33333, 2_MEAN_END:1.15, EXTRA_TRACES_ON_BREAKDOWN:2, RF_STRUCTURE:L01, NUM_BUFFER_TRACES:500, 3_MEAN_START:1.0, PULSE_LENGTH_START:100.0, PULSE_LENGTH_STEP:250.0, 1_MEAN_END:1.15, LOW_POWER_INCREASE:1000, TIME_BETWEEN_RF_INCREASES:10, KLY_PWR_FOR_ACTIVE_PULSE:500.0, 
CRPHA_CHECK_STREAK:10, KFPOW_MASK_TYPE:PERCENT, CFPOW_MASK_LEVEL:25, PHASE_MASK_BY_POWER_POWER_TRACE_1:CAVITY_REVERSE_POWER, BREAKDOWN_TRACES:['L01_CAVITY_REVERSE_PHASE', 'L01_CAVITY_FORWARD_POWER'], CRPHA_MASK_TYPE:ABSOLUTE, KFPOW_MASK_FLOOR:5000, CFPOW_AMP_DROP_VALUE:4, PHASE_MASK_BY_POWER_LEVEL_1:5000.0, CFPOW_MASK_WINDOW_START:300, KFPOW_MASK_ABS_MIN:500, CFPOW_MASK_WINDOW_END:301, OUTSIDE_MASK_COOLDOWN_TIME:3000, PHASE_MASK_BY_POWER_PHASE_TRACE_1:CAVITY_REVERSE_PHASE, OUTSIDE_MASK_CHECK_TIME:100, KFPOW_MASK_SET_TYPE:INDEX, CFPOW_MASK_TYPE:PERCENT, CRPHA_MASK_START:63, CRPHA_MASK_END:86, KFPOW_MASK_END:86, CRPHA_NUM_AVERAGE_TRACES:5, CRPHA_MASK_LEVEL:35, CRPHA_DROP_AMP:True, CFPOW_MASK_FLOOR:5000, CRPHA_MASK_SET_TYPE:INDEX, CFPOW_DROP_AMP:True, CFPOW_NUM_AVERAGE_TRACES:5, CFPOW_CHECK_STREAK:10, CRPHA_MASK_FLOOR:5000, CRPHA_MASK_WINDOW_END:301, KFPOW_MASK_WINDOW_END:301, CRPHA_AMP_DROP_VALUE:3, KFPOW_AUTO_SET:False, CRPHA_MASK_WINDOW_START:300, CFPOW_MASK_SET_TYPE:INDEX, KFPOW_CHECK_STREAK:10, KFPOW_AMP_DROP_VALUE:4, CRPHA_AUTO_SET:False, CFPOW_AUTO_SET:False, KFPOW_NUM_AVERAGE_TRACES:5, KFPOW_MASK_LEVEL:10, CFPOW_MASK_START:63, CFPOW_MASK_END:86, KFPOW_MASK_WINDOW_START:300, KFPOW_DROP_AMP:True, KFPOW_MASK_START:63, CFPOW_MASK_ABS_MIN:500, CRPHA_MASK_ABS_MIN:0, 
MOD_CHECK_TIME:1000, 
RF_PROT_CHECK_TIME:1000, RF_STRUCTURE:L01, 
GUI_UPDATE_TIME:1000, 
SOL_PV:CLA-GUN-MAG-SOL-02:READI, SOL_CHECK_TIME:1000, 
2018-12-17 15:45:36.090000 *
*** rf_condition_data pulse_count_breakdown_log ***
2018-12-17 15:45:36.092000 log_pulse_count 10727
required_pulses 500
breakdown_count 0
log_amp_set 619
current_ramp_index 32
pulse length = 0.099
next_sp_decrease 614
2018-12-17 15:45:36.093000 *
*** Last million pulses***
2018-12-17 15:45:36.095000 Million pulses agao  = -989273
2018-12-17 15:45:36.105000 Not monitoring RF-PROTECTION rfprot_monitor failed
2018-12-17 15:45:36.107000 Monitoring VAC-VALVE
2018-12-17 15:45:36.109000 Monitoring MODULATOR
2018-12-17 15:45:37.151000 data_monitoring Connected to PV = CLA-GUN-RF-LRRG-01:RT with ID = d0 acquiring data
2018-12-17 15:45:37.153000 Monitoring CAVITY TEMPERATURE
2018-12-17 15:45:38.200000 data_monitoring Connected to PV = CLA-GUN-RF-LRRG-01:RT with ID = d1 acquiring data
2018-12-17 15:45:38.202000 Monitoring WATER TEMP
2018-12-17 15:45:39.250000 data_monitoring Connected to PV = CLA-GUN-MAG-SOL-02:READI with ID = d2 acquiring data
2018-12-17 15:45:39.252000 Monitoring SOLENOID READI
2018-12-17 15:45:40.325000 data_monitoring Connected to PV = CLA-LRG1-VAC-IMG-01:P with ID = d3 acquiring data
2018-12-17 15:45:40.327000 vac_spike_monitor will drop amp on spike detection
2018-12-17 15:45:40.329000 vac_spike_monitor STARTED running
2018-12-17 15:45:40.331000 vac_spike_monitor vac_spike_status UNKNOWN
2018-12-17 15:45:40.332000 vac_spike_monitor vac_spike_status GOOD
2018-12-17 15:45:40.334000 Monitoring VACUUM
2018-12-17 15:45:41.375000 data_monitoring Connected to PV = CLA-S01-DIA-WCM-01:Q with ID = d4 acquiring data
2018-12-17 15:45:41.378000 dc_spike_monitor will drop amp on spike detection
2018-12-17 15:45:41.380000 dc_spike_monitor STARTED running
2018-12-17 15:45:41.382000 dc_spike_monitor DC_spike_status UNKNOWN
2018-12-17 15:45:41.384000 dc_spike_monitor DC_spike_status GOOD
2018-12-17 15:45:41.385000 Monitoring DC
2018-12-17 15:45:41.387000 llrf_simple_param_monitor adding KLYSTRON_FORWARD_POWER to mean trace list
2018-12-17 15:45:41.389000 llrf_simple_param_monitor adding KLYSTRON_REVERSE_POWER to mean trace list
2018-12-17 15:45:41.391000 llrf_simple_param_monitor adding L01_CAVITY_FORWARD_POWER to mean trace list
2018-12-17 15:45:41.392000 llrf_simple_param_monitor adding L01_CAVITY_REVERSE_POWER to mean trace list
2018-12-17 15:45:41.393000 llrf_simple_param_monitor adding L01_CAVITY_REVERSE_PHASE to mean trace list
2018-12-17 15:45:41.394000 llrf_simple_param_monitor adding L01_CAVITY_PROBE_POWER to mean trace list
2018-12-17 15:45:41.396000 Monitoring llrf
2018-12-17 15:45:41.397000 Monitoring outside_masks
2018-12-17 15:45:41.446000 gui_conditioning has disabled ramping RF
2018-12-17 15:45:41.558000 *
*** main_controller Loading amp_set vs Kly_fwd_pow dictionary***
2018-12-17 15:45:41.559000 Data: 51541538386.0481925294274174.547
2018-12-17 15:45:41.560000 Data: 52531139694.9800187206829258.382
2018-12-17 15:45:41.561000 Data: 53540541586.3365482323745886.884
2018-12-17 15:45:41.562000 Data: 53630341587.7866774249181233.106
2018-12-17 15:45:41.563000 Data: 54240642991.5372566331925229.215
2018-12-17 15:45:41.563000 Data: 54750043544.9955608452793572.918
2018-12-17 15:45:41.564000 Data: 55240544941.7767565396627484.915
2018-12-17 15:45:41.565000 Data: 55730344984.4883054321634007.728
2018-12-17 15:45:41.566000 Data: 56240646865.4109451369534768.289
2018-12-17 15:45:41.567000 Data: 56850347064.7135111470785150.879
2018-12-17 15:45:41.568000 Data: 57339547881.4024345443933870.596
2018-12-17 15:45:41.569000 Data: 57849848995.1177254424490342.331
2018-12-17 15:45:41.570000 Data: 58740150061.9451233386590189.175
2018-12-17 15:45:41.571000 Data: 59248051773.1033963480356485.357
2018-12-17 15:45:41.573000 Data: 59837751970.7379207395980288.905
2018-12-17 15:45:41.574000 Data: 60248353049.146438528732498.973
2018-12-17 15:45:41.576000 Data: 60737953795.6127202419499107.683
2018-12-17 15:45:41.577000 Data: 61448254692.1244977535838024.743
2018-12-17 15:45:41.579000 Data: 61937952719.460923968356528180.1
2018-12-17 15:45:41.579000 Data: 62948032.0689514962237066.180529
2018-12-17 15:45:41.580000 Data: 50519537203.2846677160646286.848
2018-12-17 15:45:41.581000 Data: 63938031.448000694137272.11649
2018-12-17 15:45:41.783000 *
*** llrf_handler set_mean_pwr_position***
2018-12-17 15:45:41.784000 rf pulse end time = 0.0990495252579, index = 1
pulse_latency     = 0
.getPulseLength() = 0.0990495252579
2018-12-17 15:45:41.785000 KLYSTRON_FORWARD_POWER found in config file
2018-12-17 15:45:41.785000 KLYSTRON_FORWARD_POWER mean monitoring started
2018-12-17 15:45:41.787000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-17 15:45:41.788000 KLYSTRON_REVERSE_POWER found in config file
2018-12-17 15:45:41.789000 KLYSTRON_REVERSE_POWER mean monitoring started
2018-12-17 15:45:41.789000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-17 15:45:41.791000 L01_CAVITY_FORWARD_POWER found in config file
2018-12-17 15:45:41.792000 L01_CAVITY_FORWARD_POWER mean monitoring started
2018-12-17 15:45:41.793000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-17 15:45:41.794000 L01_CAVITY_REVERSE_POWER found in config file
2018-12-17 15:45:41.795000 L01_CAVITY_REVERSE_POWER mean monitoring started
2018-12-17 15:45:41.796000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-17 15:45:41.797000 L01_CAVITY_REVERSE_PHASE found in config file
2018-12-17 15:45:41.798000 L01_CAVITY_REVERSE_PHASE mean monitoring started
2018-12-17 15:45:41.799000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-17 15:45:41.799000 L01_CAVITY_PROBE_POWER found in config file
2018-12-17 15:45:41.800000 L01_CAVITY_PROBE_POWER mean monitoring started
2018-12-17 15:45:41.801000 trace_mean_start/end (us) = 1.0/1.15
meantime = 0.15
2018-12-17 15:45:41.802000 set_mask_dict CRPHA
2018-12-17 15:45:41.803000 L01_CAVITY_REVERSE_PHASE, streak = 10, drop = True, drop_val= 3, update func = <bound method llrf_handler.update_mask of <controllers.llrf_handler.llrf_handler object at 0x0CCD0FF0>>
2018-12-17 15:45:41.805000 setNumContinuousOutsideMaskCount = True
2018-12-17 15:45:41.806000 L01_CAVITY_REVERSE_PHASE, setShouldCheckMask = True
2018-12-17 15:45:41.807000 L01_CAVITY_REVERSE_PHASE, setDropAmpOnOutsideMaskEvent = True
2018-12-17 15:45:41.808000 L01_CAVITY_REVERSE_PHASE, set index_mask
2018-12-17 15:45:41.809000 set_mask_dict CFPOW
2018-12-17 15:45:41.810000 L01_CAVITY_FORWARD_POWER, streak = 10, drop = True, drop_val= 4, update func = <bound method llrf_handler.update_mask of <controllers.llrf_handler.llrf_handler object at 0x0CCD0FF0>>
2018-12-17 15:45:41.811000 setNumContinuousOutsideMaskCount = True
2018-12-17 15:45:41.812000 L01_CAVITY_FORWARD_POWER, setShouldCheckMask = True
2018-12-17 15:45:41.813000 L01_CAVITY_FORWARD_POWER, setDropAmpOnOutsideMaskEvent = True
2018-12-17 15:45:41.814000 L01_CAVITY_FORWARD_POWER, set index_mask
2018-12-17 15:45:41.823000 *
*** main_controller The RF Conditioning is Preparing to Entering Main_Loop !***
2018-12-17 15:45:42.833000 set_amp = 619, took 0.00884315020951 time,  averages NOT reset, mask_set = False
2018-12-17 15:45:42.834000 Adding to pulse_breakdown_log: 10727 0 619 32 99
2018-12-17 15:45:43.839000 Found RF power, kly_fwd_power_max = 47051.954633
2018-12-17 15:45:43.840000 *
*** MASK SETTINGS***
2018-12-17 15:45:43.842000 L01_CAVITY_REVERSE_PHASE
2018-12-17 15:45:43.844000 isCheckingMask = False
2018-12-17 15:45:43.845000 Start = 0.65732866762(63)
2018-12-17 15:45:43.847000 End   = 0.864432220432(86)
2018-12-17 15:45:43.849000 Window Start = 2.79139571181(300)
2018-12-17 15:45:43.850000 Window End   = 2.80040021411(301)
2018-12-17 15:45:43.852000 Value = 35.0
2018-12-17 15:45:43.853000 Floor = 5000.0
2018-12-17 15:45:43.855000 IsPercent  = False
2018-12-17 15:45:43.856000 IsAbsolute = True
2018-12-17 15:45:43.857000 L01_CAVITY_FORWARD_POWER
2018-12-17 15:45:43.858000 isCheckingMask = True
2018-12-17 15:45:43.859000 Start = 0.65732866762(63)
2018-12-17 15:45:43.860000 End   = 0.864432220432(86)
2018-12-17 15:45:43.861000 Window Start = 2.79139571181(300)
2018-12-17 15:45:43.862000 Window End   = 2.80040021411(301)
2018-12-17 15:45:43.863000 Value = 25.0
2018-12-17 15:45:43.864000 Floor = 5000.0
2018-12-17 15:45:43.865000 IsPercent  = True
2018-12-17 15:45:43.867000 IsAbsolute = False
2018-12-17 15:45:43.868000 isGlobalCheckMask = False
2018-12-17 15:45:43.869000 *
*** ROLLING AVERAGE SETTINGS***
2018-12-17 15:45:43.869000 L01_CAVITY_REVERSE_PHASE
2018-12-17 15:45:43.870000 isKeepingRollingAverage = True
2018-12-17 15:45:43.871000 hasRollingAverage = True
2018-12-17 15:45:43.872000 RollingAverageSize = 5
2018-12-17 15:45:43.873000 RollingAverageCount = 5
2018-12-17 15:45:43.874000 L01_CAVITY_FORWARD_POWER
2018-12-17 15:45:43.875000 isKeepingRollingAverage = True
2018-12-17 15:45:43.876000 hasRollingAverage = True
2018-12-17 15:45:43.877000 RollingAverageSize = 5
2018-12-17 15:45:43.878000 RollingAverageCount = 5
2018-12-17 15:45:43.879000 data_logger pickle_dumping to D:\VELA\GIT Projects\Software\Apps\RF_Conditioner\logs_l01_test\2018-12-17-15-45-24\-1
2018-12-17 15:45:43.886000 set_global_check_mask setGlobalCheckMask True
2018-12-17 15:45:46.860000 gui_conditioning has enabled ramping RF
2018-12-17 15:45:47.957000 Adding to pulse_breakdown_log: 11235 0 619 32 99
2018-12-17 15:45:47.958000 *
*** rf_condition_data executing  get_new_set_point() ***
2018-12-17 15:45:47.961000 current   sp/W  = 619 / 30
2018-12-17 15:45:47.962000 predict   sp/W  = 205 / 29
2018-12-17 15:45:47.962000 new delta sp/W  = -414 / -1 (-1)
2018-12-17 15:45:47.963000 last delta sp/W  = 5 / -54662
2018-12-17 15:45:47.993000 set_amp = 205, took 0.0145705532716 time,  averages NOT reset, mask_set = False
2018-12-17 15:45:47.994000 *
*** rf_condition_data set_ramp_values ***
2018-12-17 15:45:47.995000 current ramp index   = 33
next required pulses = 500
next power increase  = 1000.0
next sp decrease     = 614
2018-12-17 15:45:52.979000 Adding to pulse_breakdown_log: 11737 0 205 33 99
2018-12-17 15:45:52.982000 *
*** rf_condition_data executing  get_new_set_point() ***
2018-12-17 15:45:52.983000 Not Enough KFP data to fit, returning None
2018-12-17 15:45:52.984000 current sp/W  = 205 / 19
2018-12-17 15:45:53.021000 set_amp = 215.0, took 0.0103416413081 time,  averages NOT reset, mask_set = False
2018-12-17 15:45:53.888000 data_logger pickle_dumping to D:\VELA\GIT Projects\Software\Apps\RF_Conditioner\logs_l01_test\2018-12-17-15-45-24\0
2018-12-17 15:45:56.508000 Adding to pulse_breakdown_log: 12076 0 215 33 99
