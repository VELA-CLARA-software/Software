GUI
GUI SHOW
GUI PROC
GUI FIN
src.controllers.main_controller, attempting to read config: C:\Users\djs56\GitHub\Software\Apps\RF_Conditioner\v2\test_LRRG.yml
src.controllers.main_controller, got Config, starting Logging

****************************************************************************************************
******************* __         __    _  _  ___       _   ___  ___   __         __ ******************
******************* \ \  ___  / /   | \| |/ _ \     /_\ | _ \/ __|  \ \  ___  / / ******************
*******************  \ \/ _ \/ /    | .` | (_) |   / _ \|   / (__    \ \/ _ \/ /  ******************
*******************   \_\___/_/     |_|\_|\___/   /_/ \_\_|_\\___|    \_\___/_/   ******************
*******************                                                               ******************
****************************************************************************************************
********************************* Log Started 2019-07-11-11-04-20 **********************************
****************************************************************************************************
****************************************************************************************************
****************************************** Configuration *******************************************
****************************************************************************************************
config file = C:\Users\zup98752\PycharmProjects\Software\Apps\RF_Conditioner\v2_Tony\test_LRRG.yml
dumping parsed config data to text log
CONFIG_FILE: C:\Users\zup98752\PycharmProjects\Software\Apps\RF_Conditioner\v2_Tony\test_LRRG.yml,
CFPOW_MASK_WINDOW_END: 302, LOG_DIRECTORY:
C:\Users\zup98752\PycharmProjects\Software\Apps\RF_Conditioner\v2_Tony\logs, KRPOW_MASK_FLOOR: 0.0,
CPPOW_MASK_WINDOW_END: 3.4, BREAKDOWN_TRACES: CAVITY_REVERSE_PHASE, KFPOW_MASK_SET_TYPE: TIME,
CFPHA_MEAN_END: 0.0, KFPHA_MASK_LEVEL: 35, CPPHA_MASK_TYPE: ABSOLUTE, CAVITY_TEMPERATURE_PV: ['CLA-
GUN-RF-LRRG-01:RT'], CRPHA_CHECK_STREAK: 2, VAC_SPIKE_DECAY_LEVEL: 1.2, VAC_SPIKE_DELTA: 4e-09,
CFPOW_MASK_WINDOW_START: 301, VAC_CHECK_TIME: 200, KFPOW_MASK_TYPE: ABSOLUTE,
KRPOW_NUM_AVERAGE_TRACES: 2, CFPHA_MASK_SET_TYPE: TIME, CPPOW_MASK_START: 0.8, CFPHA_DROP_AMP: True,
CFPHA_PHASE_MASK_BY_POWER_TRACE: False, SOL_WOBBLE_HI: 0.0, CRPOW_MASK_WINDOW_START: 2.4,
CPPHA_NUM_AVERAGE_TRACES: 2, CPPOW_DROP_AMP: True, CRPHA_NUM_AVERAGE_TRACES: 2, NUM_BUFFER_TRACES:
500, CRPHA_MASK_LEVEL: 35, CRPOW_CHECK_STREAK: 2, KRPOW_MASK_START: 0.8, CRPOW_DROP_AMP_VALUE: 2,
CFPOW_MASK_FLOOR: 50, CRPHA_MASK_SET_TYPE: TIME, TEXT_LOG_FILENAME: log.txt, VAC_SHOULD_DROP_AMP:
True, DATA_TEXT_LOG_FILENAME: data_log, KFPHA_CHECK_STREAK: 2, KRPOW_MEAN_START: 0.0,
VAC_SPIKE_TRACES_TO_SAVE: ['KLYSTRON_FORWARD_PHASE', 'KLYSTRON_REVERSE_PHASE',
'KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'CAVITY_REVERSE_PHASE', 'CAVITY_FORWARD_PHASE',
'CAVITY_FORWARD_POWER', 'CAVITY_REVERSE_POWER', 'CAVITY_PROBE_POWER', 'CAVITY_PROBE_POWER'],
CPPOW_MASK_SET_TYPE: TIME, CFPHA_CHECK_STREAK: 2, CPPOW_AUTO_SET: False,
OUTSIDE_MASK_PROBE_FILENAME: outside_probe_log;, CPPOW_MASK_FLOOR: 0.0, PID_output_GMON: CLA-GUN-
H2O-PID-02:OUTPUT:RB, PID_output: CLA-GUN-H2O-PID-02:OUTPUT:RB, KRPHA_MASK_ABS_MIN: 50,
KFPOW_MASK_END: 4.8, CPPHA_AUTO_SET: False, DC_SHOULD_DROP_AMP: False, CFPHA_MASK_WINDOW_END: 3.4,
CRPOW_MEAN_START: 2.9, PID_integral_gain: CLA-GUN-H2O-PID-02:INTG:RB, CFPHA_MEAN_START: 0.0,
CFPOW_DROP_AMP_VALUE: 6, CRPOW_MEAN_END: 3.1, GUI_UPDATE_TIME: 1000, CPPOW_MEAN_END: 0.0,
CFPOW_MEAN_START: 2.9, KFPHA_DROP_AMP_VALUE: 2, CFPOW_MASK_END: 179, KRPHA_MASK_TYPE: ABSOLUTE,
TRACES_TO_SAVE: ['KLYSTRON_FORWARD_PHASE', 'KLYSTRON_REVERSE_PHASE', 'KLYSTRON_FORWARD_POWER',
'KLYSTRON_REVERSE_POWER', 'CAVITY_REVERSE_PHASE', 'CAVITY_FORWARD_PHASE', 'CAVITY_FORWARD_POWER',
'CAVITY_REVERSE_POWER', 'CAVITY_PROBE_POWER', 'CAVITY_PROBE_POWER'], CFPHA_NUM_AVERAGE_TRACES: 2,
KLY_PWR_FOR_ACTIVE_PULSE: 500.0, KRPOW_AUTO_SET: False, CPPHA_MEAN_END: 0.0,
PID_proportional_gain_GMON: CLA-GUN-H2O-PID-02:PROP:RB, KRPOW_MASK_ABS_MIN: 50, KFPHA_AUTO_SET:
False, CRPOW_MASK_WINDOW_END: 3.4, SOL_CHECK_TIME: 1000, MINIMUM_COOLDOWN_TIME: 3000, RF_STRUCTURE:
L01, DEFAULT_RF_INCREASE_LEVEL: 10, KRPOW_MASK_WINDOW_END: 3.4, KFPHA_MEAN_END: 2.8,
PID_proportional_gain: CLA-GUN-H2O-PID-02:PROP:RB, CFPOW_MASK_SET_TYPE: INDEX, SHOULD_SOL_WOBBLE:
False, KRPHA_CHECK_STREAK: 2, CPPOW_MEAN_START: 0.0, VAC_SPIKE_DROP_AMP: 5, KRPOW_MASK_END: 4.8,
VAC_DECAY_MODE: LEVEL, LLRF_CHECK_TIME: 50, EXTRA_BREAKDOWN_DAQ: ['VAC_LEVEL', 'DC_LEVEL',
'BREAKDOWN_RATE', 'BREAKDOWN_COUNT'], KFPHA_DROP_AMP: True, KFPOW_AMPSP_RUNNING_STATS_LOG_FILENAME:
amp_power_log.txt, CPPHA_PHASE_MASK_BY_POWER_LEVEL: 5000.0, PID_autotune_state: CLA-GUN-H2O-
PID-02:ATUNE:RB, KFPHA_MASK_SET_TYPE: TIME, PULSE_COUNT_BREAKDOWN_LOG_FILENAME:
pulse_breakdown_log.txt, CFPOW_MASK_START: 57, CRPOW_MASK_LEVEL: 35, CRPOW_MASK_ABS_MIN: 50,
CFPHA_AUTO_SET: False, KRPHA_MASK_END: 4.8, CPPOW_MASK_WINDOW_START: 2.4, KRPOW_DROP_AMP_VALUE: 2,
CFPOW_CHECK_STREAK: 10, KFPHA_PHASE_MASK_BY_POWER_LEVEL: 5000.0, CFPHA_MASK_FLOOR: 0.0,
KRPHA_PHASE_MASK_BY_POWER_LEVEL: 5000.0, CFPHA_MASK_LEVEL: 35, CRPHA_MASK_WINDOW_END: 3.4,
KFPOW_MASK_WINDOW_END: 3.4, CPPHA_DROP_AMP_VALUE: 2, OUTSIDE_MASK_FORWARD_FILENAME:
outside_forward_log, CPPHA_CHECK_STREAK: 2, KRPHA_MEAN_END: 3.0, KRPHA_MEAN_START: 2.5,
KFPOW_MASK_START: 0.8, CPPOW_NUM_AVERAGE_TRACES: 2, CFPHA_MASK_ABS_MIN: 50, CPPHA_MASK_LEVEL: 35,
CPPHA_DROP_AMP: True, KEEP_VALVE_OPEN: True, PID_on_off: CLA-GUN-H2O-PID-02:ON:RB, CRPOW_MASK_FLOOR:
0.0, KRPHA_PHASE_MASK_BY_POWER_TRACE: False, CRPHA_PHASE_MASK_BY_POWER_TRACE: False,
CRPHA_MEAN_START: 2.8, VAC_NUM_SAMPLES_TO_AVERAGE: 7, KRPOW_CHECK_STREAK: 2, CFPHA_MASK_END: 4.8,
DC_PV: EBT-INJ-SCOPE-01:P1, KRPHA_MASK_FLOOR: 0.0, CRPHA_MASK_START: 0.8, KFPHA_MASK_END: 4.8,
CPPOW_MASK_TYPE: ABSOLUTE, CFPOW_MASK_LEVEL: 30, KFPHA_NUM_AVERAGE_TRACES: 2, PID_set_point_GMON:
CLA-GUN-H2O-PID-02:SETVAL:RB, WATER_TEMPERATURE_PV_COUNT: 2, BREAKDOWN_RATE_AIM: 100,
KRPOW_DROP_AMP: True, KRPHA_MASK_WINDOW_END: 3.4, CPPHA_MASK_FLOOR: 0.0, MAGNET_MACHINE_AREA:
CLARA_PH1, CPPHA_MASK_SET_TYPE: TIME, DC_SPIKE_DELTA: 0.015, KFPHA_PHASE_MASK_BY_POWER_TRACE: False,
KFPOW_MASK_ABS_MIN: 50, WATER_TEMPERATURE_CHECK_TIME: 1000, OUTSIDE_MASK_COOLDOWN_TIME: 3000,
KRPOW_MASK_SET_TYPE: TIME, SOL_WOBBLE_LO: 0.0, CPPHA_PHASE_MASK_BY_POWER_TRACE: False,
KRPOW_MASK_LEVEL: 35, CFPOW_MASK_TYPE: PERCENT, CFPHA_MASK_WINDOW_START: 2.4, KRPHA_DROP_AMP: True,
CRPHA_MASK_END: 4.8, CRPHA_MEAN_END: 3.0, CRPOW_MASK_START: 0.8, KFPOW_MEAN_START: 0.0,
CRPOW_MASK_SET_TYPE: TIME, CPPOW_CHECK_STREAK: 2, CPPHA_MASK_START: 0.8, KFPOW_MEAN_END: 0.0,
CFPOW_DROP_AMP: True, CFPOW_NUM_AVERAGE_TRACES: 5, CPPHA_MASK_END: 4.8, KRPHA_AUTO_SET: False,
MEAN_TRACES: ['KLYSTRON_FORWARD_POWER', 'KLYSTRON_REVERSE_POWER', 'CAVITY_FORWARD_POWER',
'CAVITY_REVERSE_POWER', 'CAVITY_REVERSE_PHASE'], DC_SPIKE_DECAY_LEVEL: 1.2, CRPHA_MASK_WINDOW_START:
2.4, CAVITY_TEMPERATURE_CHECK_TIME: 1000, CRPHA_DROP_AMP: True, PID_on_off_GMON: CLA-GUN-H2O-
PID-02:ON:RB, CRPOW_DROP_AMP: True, KFPOW_CHECK_STREAK: 2, DEFAULT_PULSE_COUNT: 150,
CRPOW_NUM_AVERAGE_TRACES: 2, MODULATOR_CHECK_TIME: 1000, SOL_COUNT: 2, CRPHA_MASK_ABS_MIN: 50,
RF_REPETITION_RATE: 10, CPPHA_MASK_WINDOW_END: 3.4, KRPHA_MASK_START: 0.8, KFPOW_NUM_AVERAGE_TRACES:
2, KFPHA_MEAN_START: 2.3, RF_PROT_CHECK_TIME: 1000, CRPHA_MASK_FLOOR: 0.0, WATER_TEMPERATURE_PV:
['CLA-GUN-RF-LRRG-01:RT', 'CLA-GUN-RF-LRRG-02:RT'], KFPHA_MASK_TYPE: ABSOLUTE, KRPHA_MASK_SET_TYPE:
TIME, KFPOW_MASK_WINDOW_START: 2.4, KFPOW_DROP_AMP: True, DC_CHECK_TIME: 1000, CPPOW_MASK_ABS_MIN:
50, VAC_VALVE_AREA: CLARA_PH1, KRPHA_NUM_AVERAGE_TRACES: 2, KFPHA_MASK_FLOOR: 0.0,
CRPHA_DROP_AMP_VALUE: 2, PID_derivative_gain: CLA-GUN-H2O-PID-02:DERI:RB, PID_autotune_state_GMON:
CLA-GUN-H2O-PID-02:ATUNE:RB, NUM_SET_POINTS_TO_FIT: 20, KRPHA_MASK_WINDOW_START: 2.4, VAC_VALVE:
S01-VALV-01, CFPHA_MASK_START: 0.8, CRPOW_AUTO_SET: False, KFPOW_MASK_FLOOR: 0.0, CPPOW_MASK_LEVEL:
35, CPPOW_MASK_END: 4.8, DC_DECAY_MODE: TIMED, CPPHA_MEAN_START: 0.0, MAX_DELTA_AMP_SP: 50,
CFPOW_MASK_MIN: 50, CPPHA_MASK_WINDOW_START: 2.4, KFPOW_MASK_LEVEL: 35, VAC_PV: CLA-LRG1-VAC-
IMG-01:P, OUTSIDE_MASK_CHECK_TIME: 100, CPPOW_DROP_AMP_VALUE: 2, DC_NUM_SAMPLES_TO_AVERAGE: 5,
CFPHA_DROP_AMP_VALUE: 2, CAVITY_TEMPERATURE_PV_COUNT: 1, VAC_MAX_LEVEL: 5e-09, CFPHA_MASK_TYPE:
ABSOLUTE, SOL_WOBBLE_OSCILLATION_POINTS: 0, KRPHA_MASK_LEVEL: 35, CRPHA_PHASE_MASK_BY_POWER_LEVEL:
5000.0, SOL_NAMES: ['L01-SOL1', 'L01-SOL2'], KFPHA_MASK_WINDOW_START: 2.4, VAC_VALVE_CHECK_TIME:
1000, CRPHA_MASK_TYPE: ABSOLUTE, GMON_SUFFIX: _GMON, KFPOW_DROP_AMP_VALUE: 2, KRPOW_MEAN_END: 0.0,
OUTSIDE_MASK_REVERSE_FILENAME: outside_reverse_log, CFPOW_MEAN_END: 3.1, WHEN_VAC_HI_DISABLE_RAMP:
True, NUMBER_OF_PULSES_IN_BREAKDOWN_HISTORY: 1000000, AMP_PWR_LOG_TIME: 50, KFPHA_MASK_START: 0.8,
CRPOW_MASK_TYPE: ABSOLUTE, DC_SPIKE_DECAY_TIME: 2000, CRPHA_AUTO_SET: False,
RF_REPETITION_RATE_ERROR: 10, KFPOW_AUTO_SET: False, VAC_SPIKE_DECAY_TIME: 2000,
EXTRA_TRACES_ON_BREAKDOWN: 2, DC_SPIKE_DROP_AMP: 6, CFPOW_AUTO_SET: False, KFPHA_MASK_WINDOW_END:
3.4, KRPOW_MASK_TYPE: ABSOLUTE, KRPOW_MASK_WINDOW_START: 2.4, DATA_LOG_TIME: 1000,
KFPHA_MASK_ABS_MIN: 50, PID_derivative_gain_GMON: CLA-GUN-H2O-PID-02:DERI:RB,
SOL_WOBBLE_OSCILLATION_TIME: 1.0, PID_integral_gain_GMON: CLA-GUN-H2O-PID-02:INTG:RB,
KRPHA_DROP_AMP_VALUE: 2, PID_set_point: CLA-GUN-H2O-PID-02:SETVAL:RB, CRPOW_MASK_END: 4.8,
CPPHA_MASK_ABS_MIN: 50, CFPOW_MASK_ABS_MIN: 50, CFPHA_PHASE_MASK_BY_POWER_LEVEL: 5000.0,

2019-07-11 11:04:20.723000
****************************************************************************************************
*************** src.controllers.main_controller, create rf_conditioning_data object ****************
****************************************************************************************************
src.data.rf_conditioning_logger get pulse_count_breakdown_log
FileName = C:\Users\djs56\GitHub\Software\Apps\RF_Conditioner\v2\logs\pulse_breakdown_log.txt
Read pulse_count_breakdown_log
rf_condition_data has processed the pulse_count_breakdown_log
log_pulse_count 63936177
required_pulses 150
breakdown_count 340
log_amp_set 7041
current_ramp_index 289
next_sp_decrease 7037
src.data.rf_conditioning_logger get pulse_count_breakdown_log
FileName = C:\Users\djs56\GitHub\Software\Apps\RF_Conditioner\v2\logs\pulse_breakdown_log.txt
Read pulse_count_breakdown_log
One Million pulses ago  = 62936177
last_million_log[ 0] = 62937093 , 335 , 6967 , 281 , 747
last_million_log[-1] = 63936177 , 340 , 7046 , 289 , 747
Getting the pulse_breakdown_log passed sanity check
update_breakdown_stats here ????????????????????
get_kfpow_running_stat_log
kfpow_running_stat_log filename =
C:\Users\djs56\GitHub\Software\Apps\RF_Conditioner\v2\logs\amp_power_log.txt
get_kfpow_running_stat_log complete

2019-07-11 11:04:21.296000
****************************************************************************************************
*************** src.controllers.main_controller, create hardware_control_hub object ****************
****************************************************************************************************
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.
hardware_control_hub Starting CATAP Hardware Interfaces
Creating physical_Gun_Protection_Controller_Obj object
messages Off
debugMessages Off
start_RF_protection()  successfully created a GUN protection control object
Creating physical_VELA_INJ_Magnet_Controller_Obj object
messages Off
debugMessages Off
start_mod_control() successfully created a VELA_INJ magnet control object
Creating physical_CLARA_PH1_Vac_Valve_Controller object
messages Off
debugMessages Off
start_mod_control() successfully created a CLARA_PH1 valve control object
Creating physical_GUN_MOD_Controller object
shouldShowMessage = 0
shouldShowDebugMessage = 0
messages Off
debugMessages Off
start_mod_control() successfully created a L01 modulator control object
Creating a physical_L01_LLRF_Controller object
messages Off
debugMessages Off
getController FIN
start_llrf_control() successfully created a L01 LLRF control object

2019-07-11 11:04:44.655000
****************************************************************************************************
******************** src.controllers.main_controller, create monitor_hub object ********************
****************************************************************************************************
src.monitors.monitor_hub Starting Data Monitoring
src.monitors.monitor_hub start_rfprot_monitor()
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.
src.monitors.monitor starting monitoring, update time = 1000
start_rfprot_monitor successfully started RF Protection Monitoring
src.monitors.monitor_hub start_vac_valve()
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.
alarm valve closed
src.monitors.monitor starting monitoring, update time = 1000
start_vac_valve successfully started Vac Valve Monitoring
src.monitors.monitor_hub start_modulator_monitor()
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.
src.monitors.monitor starting monitoring, update time = 1000
start_rfprot_monitor successfully started RF Modulator Monitoring
src.monitors.monitor_hub start_llrf_monitor()
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.
src.monitors.llrf_monitor adding KLYSTRON_FORWARD_POWER to mean trace list  trace_mean_keys[trace2]
= fwd_kly_pwr
src.monitors.llrf_monitor adding KLYSTRON_REVERSE_POWER to mean trace list  trace_mean_keys[trace2]
= rev_kly_pwr
src.monitors.llrf_monitor adding L01_CAVITY_FORWARD_POWER to mean trace list
trace_mean_keys[trace2] = fwd_cav_pwr
src.monitors.llrf_monitor adding L01_CAVITY_REVERSE_POWER to mean trace list
trace_mean_keys[trace2] = rev_cav_pwr
src.monitors.llrf_monitor adding L01_CAVITY_REVERSE_PHASE to mean trace list
trace_mean_keys[trace2] = rev_cav_pha
start_llrf_monitor  successfully started LLRF Monitoring
src.monitors.monitor_hub vac_monitor()
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.

2019-07-11 11:04:45.699000
src.controllers.hardware_control_hub connected, PV = CLA-LRG1-VAC-IMG-01:P with ID = d0,  acquiring
data
alarm rf_off
src.monitors.vac_monitor will drop amp on spike detection
src.monitors.vac_monitor STARTED running
src.monitors.vac_monitor vac_spike_status = state.UNKNOWN
src.monitors.vac_monitor vac_spike_status = state.GOOD
start_vac_monitor successfully started Vacuum Monitoring
src.monitors.monitor_hub vac_monitor()
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.

2019-07-11 11:04:46.744000
src.controllers.hardware_control_hub connected, PV = CLA-LRG1-VAC-IMG-01:P with ID = d1,  acquiring
data
src.monitors.vac_monitor will drop amp on spike detection
src.monitors.vac_monitor STARTED running
src.monitors.vac_monitor vac_spike_status = state.UNKNOWN
src.monitors.vac_monitor vac_spike_status = state.GOOD
start_vac_monitor successfully started Vacuum Monitoring
src.monitors.monitor_hub start_outside_mask_monitor()
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.
start_outside_mask_monitor successfully started Outside Mask Monitoring
src.monitors.monitor_hub start_water_temperature_monitor()
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.

2019-07-11 11:04:47.794000
src.controllers.hardware_control_hub connected, PV = CLA-GUN-RF-LRRG-01:RT with ID = d2,  acquiring
data
****************************************************************************************************
*************************************  NEW last_106_bd_count  **************************************
****************************************************************************************************
Total breakdown_count = 340
Last million pulse count => 0 - 62937093 = -62937093
Last million breakdown_count => 340 - 335 = 5
Breakdown rate good: 0 <= 100

2019-07-11 11:04:48.841000
src.controllers.hardware_control_hub connected, PV = CLA-GUN-RF-LRRG-02:RT with ID = d3,  acquiring
data

2019-07-11 11:04:48.841000
start_water_temperature_monitor successfully started Water Temperature Monitoring

2019-07-11 11:04:48.841000
src.monitors.monitor_hub start_cavity_temperature_monitor()
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.

2019-07-11 11:04:49.906000
src.controllers.hardware_control_hub connected, PV = CLA-GUN-RF-LRRG-01:RT with ID = d4,  acquiring
data

2019-07-11 11:04:49.906000
start_cavity_temperature_monitor successfully started Cavity Temperature Monitoring

2019-07-11 11:04:49.906000
src.monitors.monitor_hub start_solenoid_monitoring()
import VELA_CLARA_Vac_Valve_Control
VCvacValves Quiet Mode Set.

2019-07-11 11:04:49.906000
start_solenoid_monitoring successfully started Solenoid Monitoring
src.monitors.monitor_hub Sanity Check
is_cavity_temp_monitoring = True
is_rf_prot_monitoring = True
is_vac_monitoring = True
is_water_temp_monitoring = True
is_vac_valve_monitor = True
is_modulator_monitoring = True
is_outside_mask_monitoring = True
is_llrf_monitoring = True
is_sol_monitoring = True
