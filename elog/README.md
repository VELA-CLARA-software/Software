## How to add more Machine Status tables

Note: All these changes should be made on the Github repo and then copied to the right place on apsv2 - either in the `elog2` folder or `bjs54/machine-status`.

1. In the [machine-status](elog/machine-status) folder, create a new HTML file, using one of the existing files as a template. This will have the naming format `status.NN.MachineArea.html`, where NN is a number to help the server put the areas in order in the menu. (It doesn't affect the button order in the eLog edit page.)
2. In this file, set the table `class` in the top line. This will be used later for the table style, so remember it.
3. Write your table. It may be useful at this point to put some typical values in (instead of EPICS PVs) so you get a sensible preview of what it will look like. Make use of the `colspan` attribute of the `td` table cells to ensure wide columns are spanned over a number of smaller ones. Set the total `colspan` to be the same for each row (including the header row).
4. Replace your parameter values with EPICS PV names, in the format `{EPICS-PV-NAME-01:SUFFIX:.3f}`. The `.3f` bit is in [Python string formatting syntax](https://docs.python.org/3/library/string.html#format-specification-mini-language), which is much less complex than it looks. Basically `.3f` is floating-point with 3 digits after the decimal point.
5. Edit the style sheets in the [ckeditor](elog/scripts/ckeditor/contents.css) and [themes](elog/themes/default/default.css) folders. (You need to do it in two places so the tables look the same when editing and viewing.) In both cases, at the end of the file are a load of directives specifying the background colours of the machine status table headers and bodies. There's some explanatory comments showing the colour schemes used for ALICE in the file too. You can probably just rename one of the existing unused styles (e.g. `rfsliders`). Use the class name from step 2.
6. Add an icon if you want, in the [plugin](elog/scripts/ckeditor/plugins/vela/icons) folder. I used [flaticon](https://www.flaticon.com/) to find some good free ones. The name needs to be in the format `machineareastatus.png`.
7. In the [plugin](elog/scripts/ckeditor/plugins/vela/plugin.js) code, add your machine area name at the top. This will be displayed on the button, and so can be friendly-looking text like "Arc 2". The icon name is determined by removing the spaces, converting to lower case, and adding "status".
8. Restart the machine status server. This should be as easy as going to [the Machine Status Server webpage](https://apsv2.dl.ac.uk:27643/) and clicking 'Restart server'. Your new machine area should be shown in the menu - click it to check everything looks right.
9. Delete your browser cache (Ctrl-Shift-Del in Firefox) and reload an edit page. Check that your button appears, and it does what you expect.
